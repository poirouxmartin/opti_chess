----- Documentation pour la suite -----

https://cs229.stanford.edu/proj2012/DeSa-ClassifyingChessPositions.pdf
https://www.wikiwand.com/en/Negamax
https://thesai.org/Downloads/Volume5No5/Paper_10-A_Comparative_Study_of_Game_Tree_Searching_Methods.pdf
https://www.chessprogramming.org/Evaluation_of_Pieces
https://www.chessprogramming.org/Evaluation
https://www.cs.cornell.edu/boom/2004sp/ProjectArch/Chess/algorithms.html#board
https://www.chessprogramming.org/Main_Page
https://towardsdatascience.com/building-a-chess-ai-that-learns-from-experience-5cff953b6784
https://arxiv.org/pdf/1711.08337.pdf
https://stackoverflow.com/questions/40137240/training-of-chess-evaluation-function
https://arxiv.org/pdf/2007.02130.pdf
https://www.chessprogramming.org/Move_Generation
https://www.chessprogramming.org/Checkmate
https://www.chessprogramming.org/Bishop_versus_Knight#WinningPercantages
https://www.chessprogramming.org/Sensor_Chess#MoveGeneration
https://hxim.github.io/Stockfish-Evaluation-Guide/
https://www.chessprogramming.org/Repetitions
https://en.wikipedia.org/wiki/Threefold_repetition
https://www.chessprogramming.org/Opening_Book
https://www.chessprogramming.org/Pawn_Structure
https://www.chessprogramming.org/Time_Management
https://www.chessprogramming.org/Encoding_Moves#MoveIndex
https://lichess.org/page/accuracy
http://www.talkchess.com/forum3/viewtopic.php?f=2&t=68311&start=19
https://www.chessprogramming.org/UCT
https://www.codeproject.com/Articles/5313417/Worlds-Fastest-Bitboard-Chess-Movegenerator


----- Jeu -----

-> Promotions (de tous types plutôt que seulement dame)
-> Rajouter des tests de validité de FEN
-> Répétition de coups
-> Pouvoir naviguer dans l'historique des coups


----- Structure globale du projet -----

-> Séparer les fonctions du fichier board dans d'autres fichiers (GUI, IA...)
-> Faire du ménage dans les fonctions
-> Faire une classe pour les IA?


----- Optimisations à implémenter -----

-> Regarder quel compilateur est le plus rapide/opti
-> Algo Negamax -> copies des tableaux -> undo moves? ---> finalement plus lent?
-> Transposition tables
-> Algorithme MTD(f) <-> alphabeta with memory algorithm
-> stoi et to_string très lents?
-> Ajout de variables globales plutôt que les re définir lors des appels de fonction (valeur des pièces, positionnement...)
-> Parallélisation -> std::for_each avec policy parallel?
-> Au lieu de calculer l'évaluation à chaque coup, l'imcrémenter en fonction du coup
-> Dans le negamax, si y'a un mat, ne plus regarder les autres coups?
-> Optimiser le sort moves - l'améliorer (et l'évaluation?)
-> Remplacer des if par des &&
-> Vérifier que toutes les fonctions sont optimisées
-> Faire le triage des coups grâce aux itérations précédentes?
-> Fonction pour stocker facilement un noeud, ou savoir s'il est similaire à un autre? -> transposition tables
-> Incrémenter le game_over à chaque coup joué plutôt que de le regarder à chaque fois
-> Regarder si l'implémentation des échecs rend les calculs plus rapides
-> Ne plus jouer les échecs?
-> Copie des plateaux : tout copier? ou seulement quelques informations importantes?
-> Liste des coups légaux, et une autre liste pour les coups pseudo-légaux... pour éviter de les recalculer à chaque fois...
-> Utiliser les threads.. voir cours ProgrammationConcurrente
-> Checker SIMD code (pour optimiser)
-> Calcul de distance à un bord : simplement faire une matrice globale des distance pour chaque case, et regarder dedans -> https://www.chessprogramming.org/Center_Manhattan-Distance
-> Faut-il stocker les positions de certaines pièces (les rois par exemple), pour accélérer certains calculs?
-> Regarder dans les copies de tableau si on peut ne pas copier des choses, ou en copier plus...
-> Précalculer pas mal de choses si possible
-> Incrémentation de l'évaluation


----- Intelligences artificielles -----

--- Nouveaux algorithmes ---

-> Grogrofish_iterative_depth -
-> Changer Grogrosfish : depth -> temps (--> moteur d'analyse)
-> Faire une profodeur -> trier les coups du meilleur au pire, puis continuer la recherche plus loin
-> Agent_new = Agent_old++ -
-> Faire un agent qui gagne toujours contre un autre : regarde tous les coups, et joue pour chacun la partie jusqu'au bout en utilisant agent_old -> puis joue les coups qui gagnent
-> RE : multi_agents

--- Améliorations ---

- EVALUATION -
-> A ajouter :
	- Structures de pions :
		- Pions arriérés
	- Evaluation spéciale pour les finales :
		- Fous de couleurs opposées
		- Finales roi pion
		- Mat fou cavalier
		- Finales de tours: plus facilement nulles
		- ...
	- Cases noires/blanches -> faiblesse sur une couleur
	- Initiative -> A améliorer : fort dans les positions d'attaque?
	- Fous de couleurs opposées en finale -> draw
	- Harmonie des pièces (qui se défendent entre elles)
	- Pièces enfermées
	- Pions bloqués / Développement de pièces impossible
	- Pièces défendues
	- Faiblesse sur une couleur
	- Focales
	- Cavaliers bloqueurs
	- Finales de pions : Roi dans le carré
	- Garder les tours pour faire nulle
	- Clouage infini
	- Pression sur les cases et points faibles
	- Colonnes occupées par une dame
	- Coordination des pièces
	- Candidats pions passés : r1bq2kr/ppp1bn1p/2n1p2P/3pP1PR/3P1p2/1NPB1N2/PPQ2P2/R3K3 b Q - 0 16 : ici y'aura potentiellement un pion passé colonne g ou h
	- King proximity : proximité du roi avec les pions passés (pour les aider à avancer) (prendre en compte aussi le roi adverse)
	- Pièces non protégées
	- "anaconda" : pièces bloquées à vie + avantage d'espace etc.. plans long termes
	- Concepts de pression: attaques additionelles en rayon X à prendre en compte. Doubler les tours sur une colonne, etc...
	- Plans?
	- Colonnes fermées -> tour mauvaises. Si beaucoup de colonnes ouvertes, bonus pour les tours. Pareil pour les diagonales et les fous
	- Pions passés: prendre en compte les contrôles des alliés pour pousser les pions
	- Règle des 2 faiblesses : si y'a 2 faiblesses attaquables, ça donne un avantage
	- Winnable? en endgame par exemple si on a qu'un fou on peut pas gagner
	- Quand t'as une position stratégiquement mauvaise, il faut jouer dynamiquement (r1bq1rk1/ppn1bppp/3p4/2p5/2PP4/2N1BN1P/PP3PP1/R2Q1RK1 b - - 0 14 : là faut faire d5)
	- Proximité du roi avec les pions passés
	- Trapped pieces (https://www.chessprogramming.org/Trapped_Pieces)
	- Connectivity (https://www.chessprogramming.org/Connectivity)
	- Alignements
	- Piece coordination
	- Incremental evaluation (pour que ça aille plus vite)
	- Tour derrrière un pion passé
	- Ouvrir la position si on a un avantage de développement (roi adverse pas roqué, pièces pas développées)
	- Développer les cavaliers avant les fous
	- Favoriser les chevaux dans les positions fermées. Fous quand les diagonales sont ouvertes, tours quand les colonnes sont ouvertes (implémenter un bonus pour chaque?)
	- Attaquer la chaîne de pions
	- Moins de pions = moins de chances de gagner en finale
	- Tours liées, important
	- Colonne ouverte/semi-ouverte contre le roi adverse combiné avec diagonale ouverte = grand avantage (+2?)
	- Jouer du côté où la chaîne de pions pointe
 


-> Faire une policy pour les coups (ou des préférences de réflexion)
-> Livres d'ouvertures, tables d'engame?
-> Tables de hachages, et apprentissage de l'IA? -> voir tp_jeux (UE IA/IRP)
-> Iterative deepening pour grogrosfish
-> Améliorations pour trouver les mats les plus rapides... 
-> Ne plus regarder les branches finies de GrogrosZero?
-> Utiliser raylib pour le random? check la vitesse
-> Création d'une base de données contenant des positions et des évaluations? (qui se remplit au cours des parties...)
-> Allocations mémoires utilisant raylib?
-> Implémentation de bitboards
-> Changer la structure de données des boards pour réduire leur taille
-> Incrémentation de l'évaluation quand on joue les coups (make_move(keep))
-> Utiliser la librairie boost
-> Faire une liste séparée pour les legal et les pseudo-legal moves
-> Génération des coups de façon ordonnée? (captures en premier?)
-> Finir les undo
-> Mettre des options pour certaines fonctions pour ne pas faire les étapes inutiles (_last_move dans make_move??)
-> Faire une fonction pour initialiser un plateau (plutôt que le from_fen)
-> Faire que les undo gardent les calculs de GrogrosZero sur la position
-> Augmenter les poussées de pions en finale (les regarder en premier -> policy / move sort)
-> Faire une IA qui apprend tout seul? : update l'évaluation d'une position en fonction de la refléxion sur cette même position
-> Générer un arbre d'ouvertures !! :DDDD
-> Evaluation des pièces : prendre en compte les pièces protégées / attaquées? Pièces prenables?
-> Format du livre d'ouvertures : {(e4, fen, static_eval, dynamic_eval, nodes, {(e5, ...), (...), ...}), (d4, ...), ...}. où e4 = 1, 4, 3, 4
-> Pour l'utilisation du livre, re fabriquer un arbre?
-> Faire une table de hachage pour simplifier (et accélérer) la recherche des positions répétées
-> Pour l'historique des positions, on peut le reset à chaque coup de pion ou capture
-> Pour les transpositions, on peut peut-être renvoyer au même indice de plateau fils...?
-> Pour chaque plateau, générer et stocker la representation simpliste du plateau? Pour ensuite pouvoir aider les fils à comparer?
-> ATTENTION aux conversions int et float dans les calculs d'évaluations...
-> Mettre les règles de parties nulles et mat en dehors de l'évaluation?
-> Ajouter les pièces protégées/attaquées lors de l'évaluation pour simplifier les calculs de l'IA
-> Carré du pion en finales
-> Ne comprend pas les finales de bases (du au fait qu'il répète les coups?)
-> Regarder dag chess?
-> Faire une map des cases attaquées (ça peut rendre plus rapide les tests d'échecs)
-> OpenAI propose un diviser pour reigner pour paralléliser GrogrosZero
-> Est-ce plus rapide de mettre des boucles simples plutôt que double? while plutôt que for?
-> Endgame : la force des pièces dépend du potentiel des pions (pièces seules = bof)
-> Faire des tables d'attaque (par exemple entre roi et dame, cavalier...)
-> Refaire toute l'architecture avec les get_moves(), pour que ça prenne tout en compte (sans le faire dans l'évaluation)
-> Calculer l'avancement de la partie au fur et à mesure de la partie (au lieu de le faire à chaque fois)
-> GrogrosZero ralentit beaucoup quand les variantes deviennent longues
-> ----> Faire une recherche spécialement de mat, où on prend plus en compte le matériel??
-> Au fil de la réflexion, retirer les coups pourris?? pour augmenter la capacité de stockage...
-> Mettre une variable globale pour la règle des 50 coups (pour la passer à moins, si besoin)
-> Rechercher large au début, puis serré après??
-> Changer un peu l'algo, pour que ça ne joue pas forcément le coup auquel il a le plus réflechi, mais un autre si il semble être meilleur (quand c'est mat, facile, mais sinon, comment savoir?)
-> Attaquer les faiblesses
-> Quand Grogros joue un coup auquel il n'avait pas pensé.. les évaluations déscendent pour les coups, 1 par 1... comment faire pour que tout descende en même temps?
-> L'éval statique en position symétrique sera toujours nulle ?? (modulo le trait du joueur)
-> Puissance de la paire de fou qui dépend du moment de la partie? Qui dépend si y'a encore les dames pour compenser?
-> Découper la foncion draw en plein de sous-fonctions?
-> Chercher ce qui prend le plus de temps dans la GUI
-> Recherche de Grogros : utiliser UCT
-> Tester Grogros sur les leçons stratégiques de chess.com
-> Mettre des static const un peu partout pour éviter les re définitions inutiles
-> Faut-il prendre en compte le nombre de noeuds dans un fils pour déterminer s'il faut regarder dedans?
-> Ordonnencement des coups : checks/captures/attacks
-> Dans les positions ou des pièces peuvent être capturées, Grogros évalue très mal (quiescence depth trop faible)
-> Retirer les espace dans les parsing de FEN (ou autres caractères non désirés)
-> Passer tous les commentaires en anglais et clean le code?
-> Evaluations en finales : un cavalier seul sans pions ni rien = nul
-> Mettre les noms de version sur le nom de Grogros
-> Utiliser toutes les améliorations/optimisations possibles sur VisualStudio
-> Mettre des uint_fast8_t partout
-> Negamax : utiliser les plateaux tout faits du buffer?
-> Mettre des variables globales partout !
-> Virer les attributs inutiles des plateaux
-> Faire une fonction qui regarde si un coup est légal
-> Regarder et virer toutes les conversions de int à float, et opérations entre int et floats
-> Position à tester : GrogrosZero vs Grogrosfish : 
	-> r1bqkb1r/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 : sans cavaliers
	-> rn1qk1nr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 : sans fous
	-> 1nbqkbn1/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w - - 0 1 : sans tours
	-> rnb1kbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 : sans dame
	-> rnbqkbnr/8/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1 : sans pions
-> Faire des pre-calculs dans des constantes (genre des divisions), pour éviter de les faire à chaque fois
-> Mettre des flags pour les coups (capture, check, promotion -> caval possible??)
-> Quels paramètres sont meilleurs pour GrogrosZero? k_add? beta? quiescence_depth?
-> Utiliser std:sort pour trier les coups plus rapidement?
-> Taper les faiblesses (notions de pression)
-> Utiliser la map de contrôles pour les fonctions dans l'évaluation
-> Quand l'arbre est trop plein : élaguer les branches pourries, pour se concentrer sur les plus prometteuses
-> Faut-il vraiment regarder tous les coups d'une position avant de chercher plus loin??
-> Evaluer les finales différemment : faires des fonctions exprès pour (carré du pion, mat fou cavalier : il faut aller dans le bon coin)
-> Optimiser la mémoire de Grogros
-> Améliorer l'implémentation de l'activité des pièces : peuvent pas vraiment se déplacer sur des cases pourries...
-> Utiliser des static constexpr pour éviter des calculs redondants dans certaines fonctions
-> Re utiliser la réflexion de la quiescence search pour la recherche normale
-> Comme pour le roi, garder en mémoire l'emplacement des pièces (utiliserait 256 bytes)
-> Afficher seulement les paramètres d'évaluation qui font sens? (par exemple king opposition seulement lorsque c'est une finale de pions)
-> Faire des méthodes utiles pour les coups
-> Flags pour les coups
-> Rendre from_fen plus tolérant
-> Améliorer l'évaluation en faisant jouer contre Leela, et regarder ce que Grogros évalue mal
-> Faire le threading !
-> Implementer les policy pour les coups (pour regarder des coups plus que d'autres)
-> Revoir les undo, et les faire rapides pour les utiliser au lieu de copier les plateaux
-> Faire des tests de vitesse pour l'évaluation
-> Evaluation endgame très mauvaise
-> Quand une position est surestimée, Grogros va jouer des coups pour retarder l'échéance, mais qui peuvent pourrir la position encore plus
-> Quand une position est sous-estimée, Grogros va jouer un coup qui parait bien et réfléchir beaucoup dessus, même si d'autres variations peuvent être meilleures
-> Utiliser sort c++ pour trier les coups
-> Remettre la dame dans la mobilité des pièces et l'activité? pour que ça développe la dame aussi? Sinon, ça évalue mal ces positions: r1b1kbnr/ppqp1ppp/2n1p3/8/3NP3/2N5/PPP2PPP/R1BQKB1R w KQkq - 1 6
-> r1bqkb1r/ppp2ppp/2n1p3/8/3PP3/2P5/P4PPP/R1BQKBNR w KQkq - 0 7 : piece_mobility seulement +0.18? c'est un bug?
-> Regarder où on fait des accès mémoire fréquent et faire des copies locales pour aller plus vite?
-> 6k1/4pp1p/P2p2p1/8/4P3/1P6/5PPP/6K1 b - - 0 26 : il faut améliorer king proximity avec les pions passés: le roi est clairement pas dans le carré
-> Constructeur de coups à partir d'un string
-> Passer les fonctions d'évaluation dans evaluation.cpp
-> Il faut vider l'historique des variantes quand on change de position... faire une méthode pour reset?
-> Refaire toutes la fonction de dessin de la GUI (notamment pour clarifier les sélections.. puis faire les pre-moves..., draw arrow...)
-> Rajouter des comtempt: valeur qui dépend de l'adversaire, et qui définit à quel point tu acceptes les nulles (et tente des pièges?)
-> Faire une structure pour la recherche de MonteCarlo (arbre avec noeuds)
-> Bishop pawns: retirer une part de la pénalité quand le fou est devant et protégé par un de ses pions?
-> Souvent, Grogros dépasse le centre pour rien, et ça crée des faiblesses et ne sert à rien (il faudrait mieux se développer à la place...). Contre les double fianchetto, ce genre d'erreur est fatal
-> Faire un truc sur la mobilité totale des pièces? qui ressemble à un logarithme? -> t'as pas de coups -> eval: -inf, t'as k coups -> eval: 0, et ça augmente en log
-> Utiliser Texel tuner pour rectifier l'évaluation?
-> En finale contre fou, mettre les pions sur la couleur opposée au fou
-> Beaucoup de choses peuvent être factorisées dans le main_gui (get_orientation() par exemple)
-> Il faut des classes pour l'évaluation (mettre toutes les fonctions dedans), pour l'algo de GrogrosZero (dont un arbre de recherche...)
-> get_safe_checks() -> prend 90% du temps de l'évaluation...
-> BUG: parfois après une repetition 1 fois, Grogros choisit un coup complètement pourri et en est sûr (perdant) : ça arrive encore?
-> Pour tester les versions de grogros, faudrait que je fasse une fonction qui le confronte à un certain nombre de puzzles/evaluations et voir combien il en réussi pour lui donner un score. (utiliser ça aussi pour entraîner les réseaux de neurones?)
-> Pour get_zobrist _key, regarder si on ne le fait pas trop souvent
-> Dans les finales, il faut évaluer comment on peut avancer ou non... sinon il voit pas quand y'a des égalités...
-> 8/6B1/7p/7b/p7/1k2KPP1/1P6/8 w - - 0 39 : Grogros devrait savoir comment gagner ça quand-même (il a raté...). 8/5b2/8/4KP1p/p1kB4/6P1/1P6/8 w - - 7 9 : ici f6 fait nulle
-> Définir des concepts positionnels actifs et passifs (court terme et long terme), puis leur donner une valeur en fonction de la nature de la position (position ouvrte -> actif, fermée -> passif)
-> Les pions faibles le sont encore plus lorsqu'ils sont bloqués par des pions adverses


----- Interface utilisateur -----

-> Faire un readme pour les contrôles
-> Amélioration des sons (en faire des maison?)
-> Nouveau sons/images
-> Options : désactivation son, ...
-> Chargement FEN -> "auto-complétion" si le FEN est incorrect
-> Modification de l'incrément dans la GUI
-> Sons pour le temps
-> Premettre de modifier les paramètres de recherche de l'IA : beta, k_add... (d'une meilleure manière)
-> Musique de fond? (désactivable)
-> Ajouter un éditeur de positions (ajouter/supprimer les pièces)
-> Utiliser 1 thread pour gérer l'affichage tout seul
-> Undo doit retirer le coup du PGN aussi
-> Afficher les textes avec des différentes couleurs pour que ça soit plus facile à lire
-> Défiler la variante quand on met la souris dessus
-> Montrer sur l'échiquier quand la position est mate (ou pate, ou autre condition de fin de partie)
-> Faire un reconnaisseur de position automatique
-> Unload les images, textures etc... pour vider la RAM?
-> Pouvoir changer les paramètres de l'IA dans l'UI
-> Ajouter des options/menus
-> Pouvoir sauvegarder les parties entières dans un fichier (qui s'incrémente), pour garder une trace de toutes les parties jouées
-> Analyses de MC : montrer le chemin qui mène à la meilleure éval, puis celle qui mène au jeu qui va être joué
-> Pouvoir grab le slider, ou cliquer pour changer sa place
-> Faire des batailles entre différents paramètres d'évaluation pour voir la meilleure config -> Retour des batailles de NN?
-> Importation depuis un PGN
-> Afficher sur le PGN la reflexion de GrogrosZero
-> Pouvoir changer le nombre de noeuds de l'IA dans la GUI... ou la profondeur de Grogrosfish
-> Parfois l'utilisation des réseaux de neurones bug
-> Nd2f3 -> Ndf3? pas facile à faire
-> Faire du smooth sur la barre d'évaluation
-> Faire un graphe d'éval en fin de partie?
-> Certains calculs sont peut-être en double dans l'affichage
-> Echelle logarithmique pour la barre d'éval?
-> Gestion du temps bizarre? Car le temps affiché par GrogrosZero n'est pas vraiment le vrai (ni sa vitesse)
-> Clean l'implémentation de la GUI -> Faire des nouvelles fonctions pour tout simplifier
-> Faire un vecteur pour les pre moves et les flèches
-> Dans une position que GrogrosZero sous-évalue, jouer le coup auquel il a le plus réflechi. dans le cas contraire, jouer le coup avec la meilleure éval
-> Mettre le screenshot dans le presse-papier?
-> Faire un truc pour montrer la menace (changer le trait du joueur)
-> PARALLELISER L'AFFICHAGE !! ça lag beaucoup trop !!!
-> Refaire les pre-moves depuis zéro (et ajouter la possibilité d'en faire plusieurs)
-> Lignes de bézier et cercles pas très beaux
-> Nouveaux bruits de pièces plus "soft" + bruit d'ambiance?
-> Montrer toute la variante calculée avec des flèches (d'une couleur spéciale)
-> Dans les .h, remettre les noms des arguments?
-> Rajouter des pre-moves pour Grogros si c'est un coup forcé en face
-> Pourquoi c'est lent de changer la taille de la GUI?
-> Faire des maps pour afficher les paramètres d'évaluation (genre afficher les cases controllées, avec une couleur plus ou moins prononcée...)
-> Pouvoir facilement changer les paramètres de Grogros (quiescence depth, beta, k_add, paramètres d'évaluation...)
-> Pouvoir changer l'affichage de la GUI (winrate/eval)
-> Faire des menus
-> Désélectionner les pièces lors d'un chargement de position
-> Utiliser des checkCollision de raylib pour la GUI
-> Afficher l'incrément de temps sur la GUI, et pouvoir le modifier
-> O-O+ dans les move label à prendre en compte
-> Revoir les update du temps quand on le change pendant que ça joue
-> Afficher des traits autour du plateau chess.com?
-> Affichage de la réflexion de Grogros sur le PGN : {N: 10.29% of 544}
-> Revoir le compare moves (sinon ça affiche pas toujours le meilleur coup au dessus)
-> Montrer l'incrément sur la GUI
-> Afficher le titre et l'elo des joueurs sur la GUI
-> Revoir le tri des coups pour les flèches de GrogrosZero, car parfois ça ne se trie pas bien
-> Afficher différement la pièce sélectionnée (et au dessus des autres pièces)
-> Faire des animations de Grogros qui bouge les pièces
-> Quand on joue un coup (en appuyant sur p ou autre), il faut désélectionner la pièce
-> Refaire la réflexion de GrogrosZero: quand il y a beaucoup d'incertitude dans l'éval, regarder large. Sinon, regarder profond
-> Vérifier qu'il n'y a pas d'int overflow dans la sélection des coups (softmax...)
-> rnb2bnr/pppp1k1p/5q2/8/5p2/2N1BQ2/PPP3PP/R4RK1 b - - 3 11 : il évalue mal, et teste les coups 1 par 1 et se rend compte que ça va pas... beaucoup trop lent à ré évaluer la position correctement.
-> Changer l'affichage du plateau en fonction de l'arbre de jeu, et le fils principal (surligner le coup)
-> Barre d'éval : afficher l'éval du coup le plus recherché par l'IA? ou éval du "meilleur coup"?
-> Time management: faire en fonction de la différence entre le meilleur coup et les autres pour jouer plus vite? Debug pour voir si tout fonctionne bien
-> Afficher l'endroit où on en est dans la variante, pouvoir cliquer dessus, changer les variantes
-> Dé-surligner le coup quand on navigue dans les coups
-> From_fen -> reset l'arbre
-> Surligner le coup principal de la variante
-> Parfois des positions buggent quand on navigue.. ça affiche des pièces en énorme (à cause de la réflexion de Grogros qui a supprimé le coup?)
-> Remettre les chronos dans le PGN généré par l'arbre (et les noeuds, et d'autres notations?)
-> Garder les réflexions de GrogrosZero quand on navigue dans les coups
-> Passer une variante en principale
-> Montrer quand une ligne d'analyse est montante ou descendante
-> Parallélisation: faut que les quiescence nodes augmentent aussi
-> Quand on navigue dans la partie, jouer les son
-> Afficher en vert, orange ou rouge les forces et faiblesses de la positions?
-> Afficher à quel coup de la variante on est
-> Ré-afficher un peu mieux les variantes et avec plus de détails (profondeur...)
-> Affichage du temps dans le PGN
-> Mettre des flèches pour indiquer les coups de la variante principale?
-> Inclure la proba de nulle dans la barre d'éval
-> Au chrono, il met 1min60 au lieu de 2min
-> Améliorer le PGN (temps, noeuds, éval...)
-> Améliorer le visuel des pièces uft8
-> Colorer les cases en fonction des bonus de chaque pièce?


----- Grosses implémentations à faire -----

-> Table de transposition
-> Bitboards
-> Réseaux de neurones: tester des matches avec 0 réflexion, seulement le coup proposé par le réseau?
-> Parallélisation (possible sur le GPU?)
-> Policy pour les coups
-> "Killer moves", ou gestion des menaces
-> Arbres de variations / Chargement de PGN
-> Livre d'ouvertures
-> Beaucoup de vérifs à faire dans les fonctions principales (make_move, grogros_zero, get_moves...)
-> Buffer de coups pour éviter de les stocker dans les plateaux


----- En cours -----

-> Essayer de laisser Grogros trouver des plans? pour structurer le jeu et donner les idées / coups forts. Le faire jouer plusieurs coups à la suite pour qu'il trouve le plan?
-> Implémenter les killer moves? quand un coup est fort à une certaine profondeur, le favoriser dans les autres branches?
-> Implémenter le concept de faiblesses

-> BUGS:
1k2r2r/p1pqb1pp/2ppbn2/6B1/3NP3/2N5/PPP1QPPP/R4RK1 w - - 0 13 : Da6???????????
Qnkr3r/1p3ppp/3bq3/3p4/3B4/2P5/PP1N1PPP/R4RK1 w - - 6 16 : comprend rien à cette position... aucun bon coup n'est regardé
Qnkr3r/1p3pBp/3bq3/3p4/8/2P5/PP1N1PPP/R4RK1 b - - 0 16 : Thg8 gagne
Qnkr2r1/1p3p1p/3b4/3p4/3B4/2P3Pq/PP1N1P1P/4RRK1 b - - 0 19 : Fxg3!! gagne
1nkr4/1p4rp/3b2q1/3p4/Q4p2/2P2NP1/PP3P1P/4RRK1 w - - 0 21 : roi blanc foutu
r1bqk1nr/pppp1ppp/2n5/8/1bB1P3/2P2N2/P4PPP/RNBQK2R b KQkq - 0 6 : Fa5??.. :(
r1b2bkr/pp2Rppp/2q2n2/2p5/2B5/2N2PP1/PP2Q2P/R1B3K1 b - - 8 19 : Fxe7??
3rkb1r/pQ1b1ppp/2pp4/4q3/4n3/3N4/PPPBBPPP/R4RK1 b k - 1 14 : il a fait Df6 au lieu de Db5 après avoir vu que Db5 était meilleur...
r4rk1/ppq1bppp/5n2/3p4/8/3P4/PPP1QPPP/RNB1K2R w KQ - 3 12 : roqueeee!!!
Y'a des gros soucis avec le temps.. parfois il s'écoule quasi plus.......... (quand on lance GrogrosZero par itérations p.s. plutôt que par noeuds p.s. ...)
r1b3k1/1p3rpp/p4b2/4p3/q1B1N3/2Q5/2P3PP/5RK1 w - - 2 23 : Cxf6+??...
Parfois la couleur bug, ça oscille entre bleu et magenta sur une repet
Vérifier la profondeur des variantes. Est-elle bonne?
2k5/pr4pp/2p1p3/3p1bN1/q2P4/2P1R3/3Q1PPP/6K1 b - - 4 22 : Tb2 gagne -> il voit pas vraiment à cause de la quiescence qui update pas, car la variante n'est pas considérée comme full_explored, même si elle est forcée
r1bk3r/pp1nq2p/4p3/3pP2Q/3p4/1N1B4/P5PP/R4RK1 w - - 7 22 : il faut jouer Tf7!!
6k1/ppp2ppp/2n5/5b2/8/P1QBqNbP/1P1N2P1/R4K1R w - - 0 18 : pourquoi +280 en attaque
r1bq1r2/pppp1ppk/2n1p3/3nP1b1/3P3P/8/PPP2PP1/RNBQK2R w KQ - 0 9 : il regarde pas hxg5???
r1bq1rk1/2p1ppbp/pn1p3B/1p5p/3PP3/2N2P2/PPPQ2P1/2KR1BN1 w - - 0 12 : Dg5 c'est mat en 2 imparable.. il met combien de temps à le voir?...
r1bq1rk1/2p1pp1p/pn1p1npQ/1p6/3PP1P1/2N2P2/PPP5/2KR1BNR w - - 2 4 : e5??
rn2k1nr/ppp1ppbp/6p1/8/3Pq1b1/2P1BN1P/PP3PP1/RN1QKB1R b KQkq - 0 7 : il regarde pas Fxf3??
2r3k1/6p1/8/5p1p/4nP2/R1BRP3/2P1K2P/1r6 b - - 3 39 : il voit pas Th1?
2r3k1/6p1/8/5p1p/4nP2/R1BRPK2/2P4P/7r b - - 5 40 : Txh2??
Après une répétition, Grogros ne joue plus
Revoir les promotions de variantes etc...
Parfois quand on joue 2 fois un même coup dans des variantes différentes, ils ont le même parent... du coup quand on revient en arrière, ça va au mauvais endroit
2r3k1/pp1n3p/3P2pB/2pr1q2/P2nN3/1P4Q1/R1P2PPP/4R1K1 b - - 8 26 : ici après Ce2+ Txe2 Te1+, la quiescence s'arrête alors que le joueur est en échec
Parfois il ne joue pas le coup qu'il pense être le meilleur? r2qk1nr/ppp1pppp/2n5/8/3Pp1Q1/2P5/PP3PPP/R1B1KB1R b KQkq - 0 4 : ici il a joué Rf8 plutôt que Cf6... (après avoir vu que Cf6 était meilleur)
Quand y'a plusieurs eval de mats, il joue lentement, car les evals sont relativement proches?
r1b1k1r1/pp1npp1p/1q4p1/2p5/4B3/2P1BN2/Pb1Q1PPP/3R1RK1 w q - 0 16 : juste Tb1??
Auparavant, il prenait plus de temps pour réflechir quand les positions étaient complexes (car il jouait en fonction du nombre de noeuds "quiet")
2Bk1b1r/1p4pp/p1q2p2/3pn3/3B4/7Q/PP1N1PPP/3bR1K1 w - - 1 21 : Fe6 quand y'a pas les échecs de regardés? Txd1 sinon?
rnbqk1nr/ppp2ppp/3b4/8/3P4/8/PPP1P1PP/RNBQKBNR b KQkq - 0 4 : Dh4+??
8/q1p2kp1/3bp2p/4p3/1pP1P3/rP2RNPP/2Q2PK1/8 w - - 3 31 : Ta2 arrive et c'est foutu si laissé!
Parfois y'a des game reset...
3r1rk1/1p2p1b1/8/p1pp1p2/P2P4/1PP1P1R1/4Q3/R3KN1q w Q - 0 30 : faut roquer!!!!! -> vis à vis roi/dame => tour/dame
c3 : faut prendre h8!!
1kn5/2Rpppnp/pp6/1p6/1b6/1b1K1B2/1p5q/8 w - - 0 1 : quand on a une nulle, et qu'on peut prendre du matériel tout en conservant la nulle, autant le faire. En soi le WR augmente quand-même

NEW BUG:
Parfois on a des eval qui sont égales à +/-INT_MAX, et ça ne devrait pas être le cas...
Tout refaire la quiescence en mode debug pour clarifier...

NEXT:
-> Transpositions
-> Taper les faiblesses!!
-> REFAIRE KING PROXIMITY
-> Weak squares peut-être à revoir: une case faible ou aucune pièce ne peut aller dessus n'est pas vraiment faible... (2r1brk1/6bp/p2pPpp1/qppN4/8/1P3NP1/P1Q2PP1/4RBK1 b - - 1 25 : d4 pas faible). voir en fonction du nombre de pièces pouvant aller sur les cases...
-> Winnable endgames
-> Refaire l'algorithme pour qu'il évalue seulement les positions complètement planes (pour éviter les grossières erreurs d'évaluation) -> quiescence: évaluer tant qu'il y a des grosses variations d'éval?
-> Faire en sorte que l'algo recherche comme un humain...
-> Finaliser bloquages de pions passés (dame qui bloque est pour le moment pire qu'un contrôle qcq...)
-> Activité de la dame (pour les milieurs/fins de partie?)
-> Trop de choses à modifier pour trapped pieces (les attaques ne sont pas toujours des menaces...)
-> Pour la win_chance, faire en fonction du déséquilibre de la position: même si on a plus beaucoup de pièce, si on menace des mats, on a une bonne chance de gagner (y'a beaucoup d'inceritude dans l'éval)
-> Rajouter l'incertitude dans l'éval? -> exploration différente pour les positions incertaines
-> Augmenter vitesse d'évaluation
-> Refaire l'activité des pièces!!
-> Bonus pour les killer moves
-> Plus la position est ouverte, plus la position du roi est problématique?
-> Pour le bonus d'attaque, il faut savoir s'il est possible de mater avec ce rapport matériel...
-> Queen activity (pour mileur/fin de partie... en prenant en compte si elle est attaquable?), king activity (pour les finales), blocked central pawn (pour éviter de foutre des pièces devant?)
-> n1r1k3/2P1b3/p4p1p/1p6/1P4Pp/P1R4P/5PKB/8 b - - 5 37 : sur repet Td3 Re8 Tc3 Rd7, à un moment il veut jouer Rxc7??? (le roi est en prise...) (FIXED??)
-> Refaire le get_moves (et ne plus tester avec les échecs, faire avec des controlled squares...), puis une fonction perft test...
-> Implémenter le framework de test
-> Plans de jeux!!
-> rnb2rk1/pppp3p/5Q2/3N4/8/4p3/PPP3PP/6K1 w - - 1 19 : ici c'est bien mat en 1, 8/6p1/6k1/p2R4/b2B2K1/8/8/3r4 b - - 1 63 : ici le roi est tranquille
-> Tours liées, dame développée
-> Queen safety / activity
-> Bias move? Dans une position donnée, si pour le coup principal, l'adversaire a un coup très fort, alors on donne un biais au coup de l'adversaire pour le regarder en priorité sur les autres variantes... Est-ce que les transpositions se chargeraient déjà de ça?
-> Nouvelle quiescence
-> Toujours évaluer l'endgame pour savoir si on est bien et s'il faut échanger les pièces?

URGENT:

r4rk1/ppp2ppp/2nq1b2/2np4/2P5/2NBQ2P/PP1B1PP1/R3R1K1 b - - 2 15 : il regarde même pas d4???
FIX: pour chaque nouveau coup, faire un quiescence pour le joueur adverse pour voir la menace pour savoir s'il faut regarder tous les coups pour la parer?

r4rk1/ppp2ppp/2nq1b2/2n5/2Pp4/2NBQ2P/PP1B1PP1/R3R1K1 w - - 0 16 : test de quiescence dessus...
BUG QUIESCENCE

Update les variantes en fonction du WDL

Mettre toutes les fonctions d'évaluation dans "evaluation.h", puis clean board.h. pareil, évaluer dans l'exploration, pas dans le plateau...

ATTENTION: pour l'affichage, mélange entre best eval, et l'éval du coup principal... (pareil avec les win_chance...)
r1bq1b1r/ppp2kpp/2n5/3np3/2B5/5Q2/PPPP1PPP/RNB1K2R b KQ - 1 7 : ici par exemple... l'éval met -3, et le best WDL, c'est lequel? on sait pas trop

Ajout de la confiance dans l'affichage de la deep evaluation
RE: fonction pour l'avg score du WDL au lieu de le recalculer à chaque fois...

!!! Comment on choisit la meilleure évaluation dans l'algorithme (quand on fait les min/max) ??? faut prendre la vraie éval, ou l'avg score??

Devrait être plus confiant quand l'éval matérielle et non-matérielle sont dans le même sens (ex: b4n1N/2k3pp/2p2n2/8/3q4/8/PPQB1PPP/2K1R3 b - - 0 23)

Parfois il regarde de manière trop diffuse les coups. parfois il en regarde qu'un seul...
4rrk1/pppb4/2nbp1q1/5pBp/1P1P2p1/2PN2P1/P2Q1PBP/R3R1K1 w - - 1 22 : pourquoi il regarde tous les coups de la même manière?
rnb3r1/ppp2k1p/1b1p1N2/4P3/1P6/2P3P1/P3PP1P/RN1QK2R w KQ - 2 13 : que 76% de confiance??
r1b2bkr/ppp4p/5Q2/3N4/8/8/PPP3PP/R5K1 w - - 1 20 : Tf1 devrait booster la confiance

3r2k1/2p2pp1/p4B1p/q7/P3QPP1/1P1p3P/2P5/4R1K1 b - - 0 29 : il rate d2...
Pour chaque coup joué, faut-il que tous les sous coups soient regardés au moins une fois? sinon ça reste sur le stand pat et ça évalue très mal la position
Revoir la quiescence après d2... passer le stand pat au quiescence avec le trait à l'autre joueur?

rnbqk1nr/1p4pp/p4p2/2b1p3/3pP3/3B1N2/PPP1NPPP/R1BQ1RK1 b kq - 1 9 : premier coup auquel il pense: Re7... -_-
Parce que ça augmente l'incertitude au point de penser que c'est quasi 50/50........??
Car cette position: rnbq2nr/1p2k1pp/p7/2b1N1p1/3pP3/3B4/PPP1NPPP/R2Q1RK1 b - - 0 11 est evaluée comme la meilleure en eval, mais pas ouf en WR, car c'est le bordel...
Il faut régler le problème de savoir dans le "min-max", quoi considérer: eval ou WR? (ou les 2?)
Faut-il faire une fonction globale qui évalue une position (eval + WR), qui s'utilise autant dans le softmax que dans le min-max? pour garder une cohérence...

rn1qk2r/ppp2ppp/4bn2/3p4/1b1P1B2/2N5/PPP1QPPP/R3KBNR w KQkq - 6 7 : +2 pour le roi??
1r3rk1/p4ppp/4b3/2P3B1/3QB3/qp6/n4PPP/1K1R3R w - - 6 23 : roi blanc quasi mat

r4rk1/p1p1b1q1/2p1pp2/2P5/8/3QB3/PP3PP1/R3R1K1 w - - 0 23 : ici, veut pas jouer Dc4, car il voit que la meilleure eval c'est après Rf7 et Fg5 (sacrifice du fou), mais la position est si bordélique qu'il dit que c'est quasi 50/50
Il faut donc revoir ce qu'on met comme "meilleur coup" dans l'arbre de recherche... meilleure eval ou meilleur WR?
Il faut implémenter la "valeur d'un coup" -> à utiliser aux deux endroits pour être cohérent

Changer l'incertitude pour prendre en compte l'activité / king safety etc.. des deux camps? si les deux rois sont faibles, ça tend vers 50/50?

Quand le meilleur coup est déjà complètement exploré, faut-il refaire une exploration sans prendre en compte de coup? sinon tous les autres coups sont regardés de la même manière car tous pourris comparé au meilleur

4r1k1/5p2/2pq1np1/1p1p1b2/1PnP3p/2QNPP1P/2B1R1P1/5N1K w - - 3 37 : cavalier très fort en c4: sur un outpost doublement protégé, bloque la colonne c (faiblesse en c6), et attaque e3

Re-faut-il du k_add? FIXME *** est-ce que c'est mieux avec?
rnbq1b1r/pppp2pp/8/3Q4/4nk2/2p5/PPP2PPP/R4RK1 b - - 1 10 : la confiance passe de 92% à 5% après Cg5.. normal?
3b2rk/3P2pp/8/p7/8/2Q1p3/PP1p1pPP/3RqR1K b - - 1 36 : e2 gagne certes, mais il faut quand-même regarder un peu les autres coups...
rn5r/pp2k1pp/1b1p4/4p3/2B1Ppb1/4nN2/PP2Q1PP/3RK2R w - - 0 16 : noirs gagnants -> beaucoup d'activité et le roi blanc est pas très bien au milieu...
7R/5k2/p3p1b1/3pB1p1/3P2P1/qP3P2/2r5/4Q1K1 w - - 13 40 : grosse faiblesse sur la dernière rangée pour le roi blanc
8/6r1/4pk1p/1b6/pPpP1P2/R1K1R2P/8/8 b - - 2 39 : revoir la valeur des pions passés?
7R/5k2/p3p1b1/3pB1p1/3P2P1/qP3P2/2r5/4Q1K1 w - - 13 40 : 800 attacking power pour les blancs?..
R7/5k2/p3p1b1/3pB1p1/3P2P1/1P3P2/1qr5/4Q1K1 w - - 15 41 : les noirs ont plus d'attaque que les blancs...
5r2/6pk/p6p/1b1R4/8/1P3P2/3Q2PP/q5BK b - - 2 32 : roi blanc faible -> quasi draw
3b1r1k/3P2pp/4K3/p7/P2q3P/5q2/1P4P1/6q1 b - - 0 45 : xD évaluation à +222000... et Te8 perd quand-même

********************************************************************************
TODO *** utilisation de la valeur réelle des coups plutôt que leur évaluation
à l'inverse de la proximité, il faut les carrés des pions passés adverses pour donner des gros malus quand le roi en est loin!
ici 8/7p/p7/2k1Pp2/Pp3P1p/2p5/2P3P1/3K4 w - - 2 21 par exemple, a5 est le seul coup qui gagne
Y'a des memory leak... ça vient des maps?? à vérifier
Pour les chemins, doit-on vraiment interdire les cases controllées comme inatteignables? un rapprochement peut quand même aider... sinon il met des 0 partout.. comment adapter l'algo?
3r4/8/8/8/3P2k1/3K4/8/R7 w - - 0 1 : ici par exemple, il faut faire Tf1!
3r4/8/3k4/3P4/4K3/8/8/5R2 b - - 0 4 : là, le roi est proche...
Remettre la proximité entre le roi est ses pions alliés? 6RK/8/1k6/8/2p5/8/8/8 w - - 0 1 : ici Tg5 seul coup car ça coupe le roi...
8/7p/2P1kP2/p3p3/8/p7/2K4P/8 b - - 0 4 : roi noir pas dans le carré!
********************************************************************************

VERIFIER LA SYMETRIE DE L'EVALUATION!! -> Faire un framework de test (ça parait ok en général...)

1r3rk1/p2b1pp1/2nbp2p/q2p4/2pP2n1/2P1PNP1/PRQN1PBP/1RB3K1 b - - 3 16 : e4 c'est l'idée de la position pour les blancs. il faut donc faire le très fort f5 pour l'empêcher!
Faut qu'il arrête les Cc6 dans les positions à d4... ça bloque le pion c
r1bqk2r/ppp2ppp/2nbpn2/8/2pP4/5NP1/PP1NPPBP/R1BQ1RK1 b kq - 1 7 : b5, énorme erreur stratégique!! revoir fianchetto aussi, y'a des trucs bizarres
rajouter un vrai undefended piece? pour le val-che en c6 là...
Grogros crash souvent quand on ferme la fenêtre...
Devéloppement de la dame à rajouter... (et garder les dames augmente en général les chances de gain...)
Il est pourri, c'est chiant.. faut vraiment mettre des tests pour le rendre rigoureusement meilleur...
Unprotected pieces!!
Backrank!!
Attacking power!!
3rr3/1kpn1p1p/p1p1qbb1/2Pp2p1/Q2Pp3/P1N1P1NP/1P1B1PP1/1R2R1K1 w - - 1 24 : b4?? PAWN STORM = 0... ???
rr6/1kpn1p1p/p1p1qbb1/2Pp2p1/3Pp3/P1N1P2P/1PQBNPP1/1R2R1K1 w - - 5 26 : a4 ou b4 les coups
Montrer la confiance de la deep evaluation...
Revoir un peu les bonus d'activité en début de partie... différence entre activité court terme et long terme... parfois y'a des gros bonus alors que 2 coups plus tard y'a plus rien...
Faire en sorte que ça préfère e5 ou c5 plutôt que d5...
Il faut que les positions symétriques soient considérées comme moins incertaines... e4/e5, y'a pas beaucoup de diff -> incertitude basse...
Pour résoudre le souci des Cc3 dans les ouvertures à d4: fous -> bonus si ... , cavaliers -> bonus pour les cases tapées faibles, ou non controllées au centre? à revoir les bonus...
Candidats pions passés à rajouter pour donner les plans d'attaque de majorité
rn1qkb1r/p4ppp/4pn2/1pp5/3Pb3/1Q3NP1/PP2PPBP/RNB1K2R b KQkq - 4 10 : la protection qui change en fonction des roques... à voir si on porte ça sur tout la faiblesse long terme? car le roi blanc est loin d'être faible
Revoir l'activité... même si y'a pas beaucoup de coups possibles, une pièce peut être forte si elle tape sur une faiblesse...
Réduire la valeur des weak squares si la case est beaucoup controllée?
Confiance -> 100% si plus de pièces??
Ajouter dans l'endgame: fous de couleurs opposées, finales de tours.. de pions...
Il doit arrêter de faire d4 (Cf6) et e4! ça donne un pion!...
Candidats pions passés x carré du pion
En finales de pions, faudrait regarder plus large?
Mating nets!! (même si aucun échec est menacé)
Cases faibles proches du roi -> rajoute à la faiblesse long terme (encore plus si pas controllées par le fou du fianchetto...)
Case faible notamment plus faible si juste devant le pion adverse. Moins faible si derrière la structure adverse
r1bqkb1r/pp3ppp/2np1n2/1Bp1p3/4P3/2N2N2/PPPP1PPP/R1BQ1RK1 w kq e6 0 6 : faut pas prendre c6!! c'est con, ça rend la case d5 et le centre...
Re-buff les bonus qui rapprochent du roque?
r1bqk1nr/ppp1bppp/8/4p2Q/2B1P3/8/PPP2PPP/RNB1K2R b KQkq - 1 4 vs r1bqk1nr/ppp1bppp/8/4p2Q/2B1P3/8/PPP2PPP/RNB1K2R b KQkq - 1 4 : revoir attaque défense? la dame est mieux en d1 car elle défend tout? pas sûr... la double attaque f7 et e5 est forte
Faut qu-il arrête de faire les De2/De7 dans les ouvrtures (à cause des open lines??). Ca bloque le développement des pièces... (qui doit être revalorisé)
Déselectionner une pièce quand on reclique dessus?
Rajouter les autres facteurs de faiblesses long terme (weak_squares, pawn_storm) dans la prise en compte des roques...
Revoir pièce par pièce leur valeur globale (pour qu'avec tous les bonus, ça soit pas délirant...)
Remettre dans la compensation long terme court terme des faiblesses du roi, le potentiel d'attaque à prendre en compte
Réseaux de neurones combinés à l'évaluation??
Activité de la dame!!
Bishop pawns: beaucoup plus graves si le fou est resté derrière la structure
Le but, ça reste quand-même de rentrer dans le campt adverse... donc l'espace, c'est bien, mais seulement si ça ne créé pas de faiblesses et qu'il n'y a pas de point d'entrée pour l'adversaire
1r2q2k/4p1b1/p1n1Q1p1/1pp2p1p/3p4/3P1N1P/PPP1RPP1/4R1K1 b - - 3 26 : ici, les blancs peuvent rentrer de partout!

!!!
Pour la puissance d'attaque, il faut voir les combinaisons de pièces qui peuvent mater:
Dame + n'importe quelle pièce (y compris roi ou pion).
Dame + cavalier +++
Dame + tour ++
Dame + fou +
Tour + roi / ...
A définir, et ça fait des bonus...
!!!

King safety long terme: ajouter la prise en compte des distances au roque pour:
- pawn storm
- weak squares
- (diags)
- (exposure)
- autres
Et tout rassembler pour faire une valeur globale par roque

ALGORITHME A FIX:
Prendre le score des coups plutôt que l'évaluation les 'best_moves'

EVALUATIONS A FIX:
Trapped pieces: ne pas considérer les pièces qui peuvent s'échanger contre une pièce au moins équivalente comme trapped
Endgame de roi: pion > dame à fix
Overextended space -> si ça crée des points d'entrée pour l'adversaire, c'est pas bon
King proximity: il faut pas que le la tour "crée" un chemin pour le roi adverse (comment fix ça) -> ici: 8/3k2pp/5p2/4R3/6PP/5PK1/P7/2r5 w - - 0 35 : il faut faire Ta5 ou Tb5
King proximity: virer les vecteurs! trop lent
Protection du chemin des pions passés : 8/3k2pp/5p2/4R3/6PP/5PK1/P7/2r5 w - - 0 35 : Ta5
DONE *** Mobilité des pièces: différencier pourquoi la pièce ne peut pas bouger: est-ce bloqué par une pièce ou un pion qui ne peut pas bouger non plus? Long terme vs court terme
DONE *** Idée: faire une map avec les vraies mobilités de toutes les pièces. Commencer par considérer touts les pièces qui ne peuvent pas bouger, et les considérer comme "bloquantes".
DONE *** Les pièces peuvent en bloquer d'autres autant que des pion
King safety *** mettre tout ensemble pour les faiblesses long-terme des roques

NEW PIECE MOBILITY:
Décomposition short term / long term
SHORT TERM:
Facile à faire, on le fait déjà: on regarde les cases où la pièce peut aller (moins les cases controlées par des pions adverses)
LONG TERM:
1. Map des pions bloqués (pas de captures possibles, et pas de poussée possible). A définir: bloqués par pions adverses, ou aussi par pièces adverses? ou par pièces alliées? (sûrement n'importe quelle pièce pour simplifier)
2. Map des pièces bloquées par des pions bloqués
3. Itération: si y'a des pièces bloquées, on les rajoute à la map des pions bloqués. Si y'a des pièces ajoutées, on réitère...
4. On a toutes les pièces et pions complètement bloqués, on regarde ainsi où peuvent aller les pièces, en fonction de ça (moins les cases controlées par des pions adverses)
Exemple un peu extrême: rn1qkbnr/pbp1p1p1/1p1pPpPp/3P1P2/8/8/PPP4P/RNBQKBNR b KQkq - 0 10
FIXME *** le roi devrait toujours être bloquant, ou faut-il prendre en compte s'il peut bouger ou non?
r1b2rk1/ppppqpp1/2n2n2/2b1p3/2B1P3/2NPBNPp/PPP2P1P/R2Q2KR w - - 1 10 : ici, la tour n'est pas forcément bloquée pour toujours

TEST : 2bk4/1p1p4/1PpB1p2/2N3pB/3P2P1/P6P/8/4N2K b - - 0 38 activité du roi adverse nulle

AFFICHER LES POSITIONS DE FIN DE VARIANTES POUR CHAQUE COUP POUR VOIR LESQUELLES SONT EVALUÉES

Rajouter des facteurs pour le calcul d'incertitude? grand roque par exmeple rend les positions plus incertaines?

Refaire le get_best_move au passage pour correspondre aux vraies valeurs utilisées pour l'exploration de Grogros (qui prenne en compte le WDL)
Sinon, il va jouer trop vite des coups suboptimaux...

Prise en compte du numéro de coup dans l'évaluation? Si 2 positions mènent à une évaluation gagnante, autant aller sur celle qui mène à la victoire plus rapidement...
Comment intégrer la profondeur pour mieux comparer les coups?

FIX: le temps vraiment utilisé pour la réflexion n'est pas toujours le bon

Revoir de manière générale l'activité des pièces... ça reste le facteur le plus important pour l'éval...
FIX *** pièce sans mouvement -> beaucoup plus grave si c'est pour toujours (pièce morte). Mais dans l'ouverture c'est pas toujours si grave...

Faire un éditeur de position

Refaire un peu tout le code proprement
Optimiser les fonctions (notamment l'évaluation)

King safety: quand un roi est safe, c'est ok d'affaiblir un peu le sien pour essayer de mater l'autre...
r2qr1k1/5p2/2p1bb1B/p2pp2Q/1p2P3/1P1P3P/1PP2PP1/R4RK1 w - - 0 22 : ici, f4 est le meilleur coup!

!! r1bqkbnr/pppp1ppp/2n5/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 2 3 : attacks/defenses après Fc4??

S'insipirer de Lc0: anaconda... on laisse aucun mouvement possible à l'adversaire. tout dans le contrôle des cases...

!!!!!!!!!!!!
REGLER ALGO:
R3r1k1/1P3p2/3p2p1/5nb1/4r3/2P1p2P/4N3/2BK4 w - - 2 36 : ici y'a Tc8... il le considère pas comme bon pendant longtemps car il n'a pas regardé toutes les réponses adverses (alors qu'aucune n'est bonne)
r4rk1/ppp2ppp/2nq1b2/2np4/2P5/2NBQ2P/PP1B1PP1/R3R1K1 b - - 2 15 : ici, d4 gagne sur le champ, pareil...
2rqr1k1/p1bnnpp1/2p1p1p1/P1NpP3/Q2P4/B1P4P/4BPP1/RR4K1 w - - 5 22 : Cb7?? c'est juste une dame en 1
TESTER: forcer une profondeur 2 min pour tous les coups?
!!!!!!!!!!!!


TESTCASE PTN DE BUGGEEEE SUR LA QUIESCENCE APRES REFLEXION!!!! (FIXED?)
1r1q1r1k/2n4p/p2p1p1Q/2ppn3/7N/4R3/1PP1N1PP/5R1K w - - 1 24 : bugs après qu'il dise que Txe5 est un bon coup...
le deuxième passage de la quiescence dessus pose problème


4R3/8/8/3K1k2/8/8/8/8 w - - 41 121 : il sait plus mater avec un roi et une tour?
r1bq1b1r/ppp1pk1p/2np2p1/8/3PN3/5N2/PPP2PPP/R1BQK2R b KQ - 0 7 : évalue hyper mal cette position et la joue très mal...
3r4/pp3pkp/2pP1np1/8/2PR4/2P3P1/P1B2PKP/8 b - - 2 29 : ça gagne pas...
r1b2b2/ppp1q2Q/1n1p1k2/8/4PP2/8/PPP3PP/R3K2R w KQ - 1 18 : pas suffiant pour les blancs (gagnant aux noris)

7Q/1K2kp2/3q4/1B6/8/p7/P6p/8 w - - 0 93 : ici il reste quand-même du potentiel d'attaque pour la dame noire, pas seulement 5% du total...
3q2rk/1r3p1p/1n1Bpnp1/1N1p4/P2P4/1P1BP3/2P2PPP/R2Q1RK1 w - - 4 19 : a5 bon: la colonne a est protégée par la tour en a1

Même chose pour les trapped pieces que pour queen safety: on regarde pas les cases controllées en général, mais seulement les cases controllées par des pièces de valeur inférieure?

FIXME *** parfois ça crash encore??

Problème de quiescence!! ici Dxc4 est moins bon que le standpat, alors il va lui donner la valeur moins bonne du standpat après Dxc4, alors que c'est un coup pourri...
Ce qui fait que le coup précédent f6 est trop peu regardé (4rrk1/1p1b1p2/2np4/p1q1bPpQ/2PpP3/PP1P3P/5RB1/4BR1K w - - 0 30)
4rrk1/1p1b1p2/2np1P2/p1q1b1pQ/2PpP3/PP1P3P/5RB1/4BR1K b - - 0 30

FIXME *** 
8/PK6/3k4/8/8/8/8/8 w - - 0 79 : a8=Q diminue le WR??? (FIXED)

Gros fix:
- Quiescence
- Lenteur de l'éval et de l'UI
- Tests à rajouter
- Transpositions
- Réglages algo
- Idéalement, on veut une majorité de la reflexion sur 1 seul coup pour la profondeur. Mais pour les autres coups, on répartit assez large...
- Utilisation des vraies valeurs des coups au lieu de l'éval pour la quiescence
- Amélioration de la comparaison d'évaluations, pour ne pas suelement prendre en compte la valeur numérique de base
- Très lent après queen safety... en plus dans la GUI, le calcul de la valeur des coups est faite en permanance...

Gros ajouts:
- Queen safety: r1b1k2r/ppp1ppbp/2n2np1/5q2/3P4/2N1BNR1/PPPQBP1P/2KR4 w kq - 2 12 ici par exemple, elle est au milieu de toutes les pièces... au moins un exposed_queen pour éviter qu'il la mette au centre de l'échiquier dès le début...
- Winnable: 6k1/2p5/N7/8/4K3/8/8/8 b - - 0 61 : ici c'est nulle. 6k1/2p5/8/P1N5/1n2K3/8/8/8 w - - 0 61 : Cd3 seul coup qui gagne
- 7k/1p4pp/p1p3p1/1P5q/P2PpPn1/6P1/4Q3/R5K1 b - - 1 29 : draw
- 1n4k1/2p5/8/P2K4/8/3N4/8/8 w - - 4 63 : Ce5 ou Cb4 seuls coups
- Potentiel défensif pour king safety (finales de pièces lourdes -> king safety compte beaucoup plus)
- Point d'entrée dans la position: 1r2q2k/4p1b1/p1n1Q1p1/1pp2p1p/3p4/3P1N1P/PPP1RPP1/4R1K1 b - - 3 26 : ici, les blancs peuvent rentrer de partout!
- Tours liées?
- Pions candidats passés / Avancée des pions en finales / Majorités de pions: 8/1p2bk1p/4p1p1/PPrpP3/5P2/3K4/3B2PP/R7 w - - 1 27 (a6 gagne) (les cases sont aussi protégées par la tour en a1)
- Roi en face du pion adverse en finale -> draw
- Bon tri des coups! r1bqr1k1/1pp2p2/p3p1BQ/2Pn4/3P4/P1P4P/5PP1/1R2R1K1 w - - 5 27 : ici, il faut regarder les menaces en premier! Dh7+ #2
- Finir la quiescence avec d'autres optimisations, et vérfier que les positions de fin sont toujours quiet. et ne regarder que les prises vraiment intéressantes?
- Prendre en compte les fourchettes dans l'évaluation: r4rk1/ppp2ppp/2nq1b2/2np4/2P5/2NBQ2P/PP1B1PP1/R3R1K1 b - - 2 1. Fourchette sur pièce non défendues, ou SEE positif
- Quand on est en réflexion sur un coup un peu pourri, peut-être diminuer la quiescence depth, car ça prend beaucoup de temps pour pas grand chose...
- Winnable pour les finales asymétriques (fou contre cavalier, ou pièce mineure et pion vs tour...)
- Si y'a pas de plan -> plutôt draw? ou au moins winnable--?


Quiescence:
3rr1k1/1p1b1pnp/pqpPn1p1/8/8/1PQ2N2/PBB2PP1/3RR1K1 w - - 0 1 : ici faut voir qu'après Txe6 y'a une menace de mat en 1... comment anticiper ça? en triant les coups?
r4rk1/pppq1ppp/2n2n2/3P4/1bQ5/2N2N2/PP3PPP/R1B2RK1 b - - 0 13 : ici??
r4rk1/ppp2ppp/2nq1b2/2n5/2Pp4/2NBQ2P/PP1B1PP1/R3R1K1 w - - 0 16 : ..........
4rrk1/1p1b1p2/2np1P1Q/p1q3p1/2PpP3/PP1P3P/5RBb/4BR1K b - - 2 31 : ??? problème de tri des coups? le mat devrait TOUJOURS être en premier!
4rrk1/1p1b1p2/2np1P1Q/p1q3p1/2PpP3/PP1P3P/5RBb/4BR1K b - - 2 31 : mat imparable
2rqr1k1/pNbnnpp1/2p1p1p1/P2pP3/Q2P4/B1P4P/4BPP1/RR4K1 b - - 6 2 : dame en prise...
TEST: mettre la beta margin seulement s'il y a une grosse menace détectée? -> et grandir le margin en fonction de la taille de la menace? DONE
TEST: quiescence moins profonde pour les coups pourris: DONE
r1bqr1k1/1pp2p1Q/p3p1B1/2Pn4/3P4/P1P4P/5PP1/1R2R1K1 b - - 6 27 : il regarde Rf8 puis Fxf7 et s'arrête...? -> Si tri des coups, ça devrait aller...
Vérifier que les move sounds fonctionnent
Faire du cleaning grâce à l'implémentation des flags pour les coups
Cleaning global rapide en utilisant toutes les nouvelles implémentations
Optimisation du quiescence

r7/6pk/2P1P1qp/3Q4/8/6P1/4R1K1/8 b - - 0 51 : De4 gagne facile
r1b1kb1r/ppp2ppp/3q1n2/4p3/3N4/2N5/PPP1BPPP/R1BQR1K1 b kq - 0 9 : Dxd4 puis dxd4 pendant la réflexion -> mauvais son utilisé (coup normal au lieu de prise...): DONE

FIX: certaines positions sont évaluées plusieurs fois?...
2rqr1k1/pNbnnpp1/2p1p1p1/P2pP3/Q2P4/B1P4P/4BPP1/RR4K1 b - - 6 22 : RE bug!!! : DONE
En plus ça prend des places dans le buffer... MAUVAIS!!!! FIIIIIXX

r1bqkbnr/5ppp/p1np4/3Np3/4P3/p7/PPP1BPPP/R1BQ1RK1 b kq - 1 10 : weak squares exagérés... pas +250 pour ça...
r1bqkbnr/5ppp/p1np4/1p2p3/4P3/N1N5/PPP1BPPP/R1BQK2R b KQkq - 1 8 : b4 gagne! c'est une fourchette de cavaliers

Notation des coups:
Cb8d2 -> Cbd2 DONE
Roque + échec: O-O+ DONE

Parfois, une pièce qui bloque la colonne (genre un cavalier protégé), ça peut rendre pour l'adversaire la colonne quasi mauvaise

1r1k4/q2p1p2/3b1Pr1/8/4P2P/6P1/PPP1N3/R1Q1KR2 b Q - 0 27 : Fxg3+ gagne!
3k4/3p1p2/5P2/8/4P2P/4q3/PQP3r1/R2K1R2 b - - 2 32 : ?? c'est mat en 1 pour les noirs!!
r3kbnr/pp3ppp/2n1p3/2ppPb2/2PP4/1Q2BN2/P3BPPP/qN3RK1 w kq - 2 10 : trop lent pour calculer dans ce genre de positions! il n'évalue que très peu de coups
8/7k/8/7K/7P/7P/8/8 b - - 8 131 : ça c'est une nulle...
6R1/8/5kp1/5b1p/7P/5PKP/8/8 w - - 12 56 : faut toujours monter le roi... f4 est une grosse erreur ici!
8/7k/6R1/6Kp/5p1P/7P/4b3/8 w - - 2 79 : Td6 seul coup qui gagne
8/5k2/1R4p1/7p/4bP1P/6KP/8/8 w - - 11 62 : faut garder le roi adverse loin pour gagner
r4rk1/pppq1ppp/2n1pn2/8/1bQPP3/2N2N2/PP3PPP/R1B2RK1 w - - 1 12 : d5! gagne

r1bqr1k1/1pp2ppp/2p2bn1/p7/3PP3/4BN1P/PPQN1PP1/R3R1K1 w - - 0 15 : ici la tour a est en fait mieux en d1 que c1 (malgré la colonne semi ouverte c). Car en face de la dame, et prépare les poussées au centre
r6r/1p1k3p/p2p1npb/4p3/4P3/4NP2/PPP1K1PP/R1B4R w - - 2 17 : l'avantage du pion est suffisant pour les blancs de gagner
8/5pk1/p3p1p1/Pp5p/1P1R3P/5bP1/7K/8 w - - 0 59 : gagnant pour les blancs! (fou avec les mauvais pions), mais qualité d'avance, et a6 va tomber
8/5p2/PR2pk2/1p5p/1Pb4P/8/7K/8 w - - 1 64 : gagnant aux blancs!! évaluation du roi bof

R4Q2/6pk/1q6/8/3P4/2N3r1/1K6/8 w - - 5 49 : Ra2 gagne
1rb5/3r1p1Q/np1qpk2/8/2p5/2P3P1/4PPBP/R4RK1 w - - 1 22 : mieux pour les noirs
2B3k1/5ppp/4p3/4P3/3K1P1B/1b6/7P/8 w - - 2 28 : ici Rc5 fait sens: le roi est mieux en d6 que d4

FIXME *** (cas très rare): rnbqkbnr/pppp1ppp/8/4p3/6P1/5P2/PPPPP2P/RNBQKBNR b KQkq - 99 2 : ici Dh4 ça reste mate, c'est pas 50 moves rule (FIXED)

Mode analyse ne fonctionne pas sur la POV des noirs? (seulement parfois?)


FIXME ***
Quand on load une position, il faut qu'elle soit déjà mise dans l'historique des positions (déjà fait?)
Le temps s'arrête parfois après une repet, mais pas tout le temps...
Crash parfois?
***

FIX!!!

1nb2rk1/r4ppp/p4q2/2p2N2/8/2bB1Q2/PPP2PPP/3RK2R w K - 0 18 : quiescence pourrie ici
r1b2rk1/1p1p2pp/p3p3/2P1p3/nR1K1P2/6B1/P5PP/5B1R w - - 0 3 : ici aussi

1nb2rk1/r4ppp/p4q2/1Bp1bN2/8/2N2Q2/PPP2PPP/3RK2R w K - 1 17 : pb de quiescence -> Fd3 tient!
r1b2rk1/1p1p1ppp/p3p3/4P3/n1PK1P2/6B1/P5PP/1R3B1R w - - 3 18 : c5 gagne!
Quiescence OK, mais si Fd3 puis 1 noeud sur Fxc3 -> mauvaise quiescence

r1bq1rk1/pp3p2/2nbpp2/1Bp4Q/5P2/8/PBPP2PP/R4RK1 w - - 2 14 : beaucoup de coups gagnent, mais Dg4+ puis Tf3 ça mate

Régler les problèmes d'exploration de variantes dans l'UI quand on fait LCTRL-L

rnbqk2r/ppp2ppp/3b1n2/3P4/3p4/2N2N2/PPP2PPP/R1BQKB1R w KQkq - 0 6 : Dd4 le bon coup... faut qu'il arrête avec ses De2 pourris!
r2qr1k1/pp3pp1/2nb1n1p/8/6bB/2N2N2/PPPQBPPP/2KR3R b - - 3 12 : Roi -166 exagéré?

4r3/8/1b4PP/2k5/3p1N2/4rb2/1PPRp3/1K2R3 w - - 1 47 : h7 gagne...

Afficher le winnable dans la deep_eval? r4rk1/pp4pp/2p3p1/3p3q/3P1N2/4P1P1/PPQ2nP1/R1R3K1 b - - 5 20 : pourquoi draw sur Txf4? pas de winnable?
8/1R1b1k2/2n2p2/3NpPp1/2PpP1Pp/3P3P/8/2r2BK1 b - - 20 38 : clouage sur une pièce non défendue = gros bonus de manière générale

r2qk2r/1pp1bp2/p1n1p3/5bp1/3PNN1p/P3QP1B/1P6/2KR3R w kq g6 0 19 : Cxe6! seul coup qui tient
r2qk2r/1pp1b3/p3p3/n2P1bp1/4N2p/P3QP1B/1P6/2KR3R w kq - 1 21 : ici il met beaucoup trop de temps à voir dxe6! car il doit calculer chaque response au moins 1 fois?...
Problème du fix: parfois on est en profondeur 1 de partout...

r1br2k1/ppp2ppp/1bn1q3/4p3/4P3/2NP1N2/PPPQB1PP/2KR3R b - - 2 15 : la dame est pas si mal en e6 ici, Dg6 est un mauvais coup... elle se fait attaquer, et a moins d'espace...

Placement de la dame: bien en c2, d2 et e2 en début de partie

K1k5/P7/8/8/2N5/8/8/8 w - - 1 77 : ça c'est nulle... lol

r1br2k1/ppp2ppp/1b1q4/3Np3/3nP3/3P1N2/PPPQB1PP/2KR3R w - - 5 17 : ici il faut comprendre que le cavalier en d5 est meilleur que le fou en b6

CLEANING:
- Passer en mode debug, faire du nettoyage sur toutes les fonctions
- Utiliser le profiler pour accélerer les fonctions lentes

FIXMMMEEEEE
En fin de partie, quand y'a roi et tour, la quiescence regarde les echecs plein de fois, et c'est hyper lent!
Différencier quiescence pieces et échecs??
Retirer les échecs de la quiescence??
Refaire une quiescence custom genre Grogros?
Vérifier: les noeuds précalculés par la quiescence sont-ils pris en compte dans l'exploration?
Pour la quiescence: faire un bon tri de coup (meilleures captures d'abord, et meilleurs échecs? safe, et pas bloquable?)
Améliorer queen safety: les menaces ne viennent seulement des 'safe attacks'. Aussi considérer les découvertes? FIXME: r1b1kb1r/ppp2ppp/2n1p3/8/4q3/5N2/PPPPBPPP/R1BQR1K1 w kq - 0 9
r1r3k1/pp2bppp/3q4/3Pnp2/4nB2/2NB4/PP3PPP/R2QR1K1 w - - 5 16 : lent!!!!!

Bishop pawns: plus gros malus pour les pions centraux?

r2q1rk1/p4ppp/np3n2/2pp4/3P4/P1P1P3/1B2NPPP/R2Q1RK1 b - - 0 1 : ici Dd7 est le plus fort: développement de la dame, lisaison des tours, et la dame n'est pas attaquable

1R6/8/5pk1/1p6/6KP/4P3/8/1r6 w - - 0 46 : bug répétition, ça crash -> DONE

2b1r3/p4kq1/4pnr1/3pR3/2pP2pR/2P1N1P1/Q4PB1/6K1 w - - 2 44 : Cxd5!! gagne le plus rapidement
3rkbnr/p3pppp/2b5/4N3/2q5/6Q1/PP1P1PPP/RNBK3R b k - 3 13 : -1000 pour king safety?? :(
5r2/1R6/3P3p/P4p2/8/P2P1k1P/8/7K b - - 0 46 : Tf6! seul coup
4rrk1/1p1b1p2/2np4/p1q1bPpQ/2PpP3/PP1P3P/5RB1/4BR1K w - - 0 30 : f6!
r3k2r/ppp1bpp1/2p1b2p/4P3/8/1PN1B3/P1P2PPP/R2R2K1 w kq - 1 17 : les noirs sont mieux ici
r1bqk1nr/pppp1ppp/2n5/b7/2B1P3/1Qp2N2/P4PPP/RNB2RK1 b kq - 0 1 : De7 mauvais coup: opportunités tactiques car le roi et la dame sont trop proches
r1b1k2r/ppp1qppp/3p1n2/4n3/2B5/B1Q2N2/P4PPP/R4RK1 w kq - 0 6 : Cxe5?? ça gagne juste facilement!
2rq1rk1/pb1nbpp1/1p2p2p/3n4/3N3B/2NBP3/PPQ2PPP/R2R2K1 w - - 3 6 : king safety!! pas +4 là, y'a rien!
3r2k1/1p3p2/2q2bp1/p2P4/8/B6Q/PP2RPPP/5K2 b - - 4 30 : king safety?
r1r3k1/pp2bppp/3q4/3Pnp2/4nB2/2NB4/PP3PPP/R2QR1K1 w - - 5 16 : POURQUOI IL EST AUSSI LENT??

r1b2rk1/1ppqbppp/p1n1p3/3p4/1PPP4/P1nBPN1P/R2N1PP1/2BQ1K1R w - - 4 12 : quiescence ici: il va jamais jusqu'au bout des variantes
r1b2r2/1ppqbppk/p1n1p3/3p4/1PPP4/P1n1PN1P/R2N1PP1/2BQ1K1R w - - 0 13 : ici il voit Dxc6 à la toute fin après Dc2 Ce4

Finales de dames: pions passés et sécurité du roi ++
Finales: le pion passé le plus proche de dame donne un gros avantage

Remettre game_over(3) de base? c'est juste 2 sinon.. grosse différence?

Gestion des draws:
- Incertitude max = WDL 50/50 ou 33/33/33?
- Passer la winning eval à +100 au lieu de +125?
- Beta down -> 1.0 au lieu de 1.5?

REGLAGE ALGO: l'implémenter aussi pour la quiescence! (il reste les cutoffs à gérer)
TESTS POUR REGLAGE DE L'ALGO (eval vs score)
Q7/4p2p/3k4/5p2/4q3/6P1/P2PPK2/8 w - - 2 39
r1bq1b1r/ppp2kpp/2n5/3np3/2B5/5Q2/PPPP1PPP/RNB1K2R b KQ - 1 7

r1bq1rk1/2p2p2/p2p1n2/1pb1p1B1/4P3/1P1P3P/1PP2PP1/RN1Q1RK1 b - - 0 14 : Rh7 meilleur coup... le roi mieux placé que en g8... à comprendre

TODO *** Cases faibles proches du roi:
rn1qkb1r/ppp2ppp/5n2/3pp3/6b1/3PPNP1/PPP2PBP/RNBQ1RK1 w kq - 0 1 vs rn1qkb1r/ppp2ppp/5n2/3pp3/6b1/1B1PPNP1/PPP2P1P/RNBQ1RK1 w kq - 0 1
rn1q1rk1/ppp1bppp/5n2/3pp3/P5b1/N2PPNP1/1PP2PBP/R1BQR1K1 w - - 0 1 vs rn1q1rk1/ppp1bppp/5n2/3pp3/P5b1/NB1PPNP1/1PP2P1P/R1BQR1K1 w - - 0 1

TODO !!  pour les faiblesses long-terme du roi, il faut grouper les paramètres par roque... sinon il prend le meilleur de chaque roque et pense être bien...

FIXME *** r3kb1r/pp1q1ppp/2p1pnb1/3p4/3P1BP1/2N1PP2/PPP4P/R2QKB1R w KQkq - 0 10 : il veut Rf2, car le roi est considéré comme bloquant au long terme

Il faut s'assurer que pour une évaluation donnée (disons +100 matériel, +100 activité), que le gain d'activité n'augmente JAMAIS l'incertitude au point de réduire le WR...
WR (100, 100) < WR (100, k) pour tout k > 100 /!\

4q1k1/p2n1pp1/1pb1r1rp/4P3/P1pP1Q2/2P1N3/2B2RPP/5RK1 b - - 8 26 : Lc0 aux blancs, grogros aux noirs... y'a qu'à regarder la coordination des pièces...

rnbqk1nr/1p4pp/p4p2/2b1p3/3pP3/3B1N2/PPP1NPPP/R1BQ1RK1 b kq - 2 10 : il regarde Re7 ou Rf7... à voir si ça se règle avec la modif de l'algo

r2q1rk1/pbp1bppp/1p2pn2/8/3P4/3BBN2/PPP1QPPP/R4RK1 b - - 2 11 vs r2q1rk1/pbp1bppp/1p2pn2/8/3P4/3BBN2/PPP1QPPP/1K1R3R b - - 3 11

rnbqk2r/ppp1bppp/5n2/3p4/3P1B2/2N1P3/PP3PPP/R2QKBNR b KQkq - 0 6 : attaques/défenses qui deviennent pourries après Ff5? (+192... à revoir...)

6k1/p3r2p/3R3p/2p2N2/5P2/2P5/P5PP/6K1 b - - 0 31 : king proximity qui augmente après Te2? et diminue après Td7?? ça devrait être l'inverse??
En fait, c'est parce que le fait de mettre la tour en e2 créé un chemin virtuel pour le roi blanc, PAR e2... pareil pour Td7...

Il veut beaucoup trop faire de f3...
Move: i1 -> row1...
Pareil de partout, les i = row, et les j = col

5k2/P7/1P2Q3/8/8/2P5/6K1/8 w - - 5 61 : faut régler ça... le pion b7 est plus fort qu'une dame... -_-...

3rr1k1/2p2ppp/1bp2n2/pp6/4PB2/2PPN2q/PPQ1BP2/R4RK1 b - - 3 9 : Rh8 qui augmente l'attaque à cause des différences de colonnes, à revoir...
Et 1000+ en attaque?? y'a au max 2 pièces!! ...

5r2/1pk3p1/2pr3p/p1n2P2/2PN4/2P1pBP1/6KP/1R1R4 b - - 0 29 : pareil, trop d'attaque par rapport à la défense... y'a rien ici

2r5/3r4/p1p1pk2/PpRnR2p/3P2p1/4P3/7P/1B5K b - - 5 37 : il pense être mieux aux blancs à cause du roi noir supposé faible...

rnbqkb1r/ppp2ppp/5n2/3p4/3P4/5N2/PPP2PPP/RNBQKB1R w KQkq - 0 5 vs rnbqkb1r/ppp2ppp/5n2/3p4/3P4/2N5/PPP2PPP/R1BQKBNR w KQkq d6 0 5

r4r1k/p3pp2/2p5/5R2/5B2/8/PPP2P2/1K6 b - - 0 28 : placement +600???

En finale, que les pions soient passés ou non, faut les pousser!

Finales de pièces lourdes: gros avantage pour celui avec le roi le moins faible
Potentiel offensif des pièces lourdes >> potentiel défensif...
Implémenter un potentiel défensif (plus gros pour les pièces mineures...)

Retirer toutes les méthodes inutiles

FIXME: bon il est encore tout cassé et tout pourri... merde

6k1/5p2/1n5p/1P1qb1p1/8/B3P1P1/5P1P/1Q4K1 b - - 0 30 : Fianchetto exagéré?

4r1k1/p1p2ppp/1p2bn2/8/1r6/1PN1B3/P3BPPP/R2R2K1 b - - 1 16 : la confiance augmente après c5, alors que ça donne de l'avantage aux noirs..??

r1b2r2/1ppqbppk/p1n1p3/3p4/1PPP4/P1n1PN1P/R1QN1PP1/2B2K1R b - - 1 13 : Ce4 gagne!! problème dans le calcul? à chaque fois il semble garder trop de standpat...
r1bq1rk1/ppp2ppp/2n1p3/3p4/1bPPn3/3BPN1P/PP3PP1/RNBQ1K1R w - - 3 8 : c5! enferme le fou...
v2 : le roi noir ne sue pas du tout

3qkb1r/p1pbnppp/2p5/4N3/Q7/2N5/Pr3PPP/3RR1K1 b k - 1 14 vs 3qkb1r/p1pbnppp/2p5/4N3/Q7/2N5/Pr3PPP/3RR1K1 b - - 1 14

8/2p2kp1/R2b4/3K1P2/p2B2P1/8/8/4r3 b - - 7 65 : test

r1bq2kr/1pp1n1pp/1b2p3/pP1pP1Q1/P4P2/B1PB4/6PP/RN2K2R b KQ - 4 15 : gagnant pour les blancs. Le roi blanc est en fait plus safe, grâce à l'espace. le pion e5 est en fait une pièce quasi entière dans l'attaque!

r6r/p1kb2p1/1p2p3/3pP3/2p2P2/2P1R1P1/PP1N2P1/R5K1 b - - 0 20 : c'est un pion net de plus pour les blancs! complètement gagnant!
6rr/p1kb4/1p2p3/3pP1P1/2p5/2P1RNP1/PP4P1/R5K1 b - - 2 22 : bien gagnant pour les blancs

r1bq1rk1/ppp1bppp/2n1p3/3p4/2PPn3/2NBPN2/PP1B1PPP/R2Q1RK1 b - - 2 10 : faut prendre d2 pas c3!

Comparaison de positions quasi symétriques:
r1bq1rk1/pp3ppp/2pbpn2/8/3P4/2PB1N2/PP3PPP/R1BQ1RK1 w - - 1 14 : gagnant pour les blancs: pion en d4 vs e6 -> Fou c1 >> Fou c8 + centre
r1bq1rk1/pp1n1ppp/2pbpn2/3p4/3P4/2NBPN2/PPP2PPP/R1BQ1RK1 w - - 4 9 : Cc3 vs Cd7 et pion c3. Attention, ça donne weak_squares +25..? Normalement, blancs légèrement mieux si e4 est joué. Moins bien sinon

revoir la valeur d'une attaque de pion sur pièce? sinon en fin de chaque variante il en a peur, et joue pleutre

rnb1r1k1/ppp3pp/5p2/3p4/3PP3/P2B1N2/P2K1PPP/1R5R w - - 1 16 : exd5 qui augmente l'éval pour les noirs?......

8/4q1k1/2R5/5Q2/6PK/8/8/8 w - - 7 86 : Dg5 professionnel! la confiance passe à 98% -> en gros = 100% win...

Un centre fort est un centre qui ne peut pas être contesté! Les ruptures adverses sont fortes si elles sont possibles...

Nulle, c'est nulle... si on a possibilité de faire une nulle, faut-il instaurer le "nul en x coups", comme pour les mats?

FIX
REGLER LE TEMPS DE REFLEXION QUI EST INCORRECT
BEAUCOUP DE TEMPS EST PASSE SUR LA GUI!
FIX

LENT SUR GUI:
SLIDER TEXT (MEASURETEXT TRES LENT)

MONTRER LE RATIO DE TEMPS PRIS PAR L'UI!!

GET ALIGNMENTS EST LE PLUS LENT (à cause des push back et les vecteurs.......)

VIRER TOUS LES VECTEURS... c'est beaucoup trop lent...
Toutes les opérations de texte sont hyper lentes! notamment dans score_string, et tous les to_string qui utilisent du sstream

Quasi tout repose sur le fait de pouvoir entrer ou non dans la position adverse... Il faut implémenter un truc genre 'point d'entrée'?

1r2r1k1/p4p1p/5pb1/2P5/1p1P1B2/1P5P/P5B1/R5K1 b - - 1 33 : pions passés liés inarrêtables... blancs gagnants (grâce aux fous qui contrôlent les cases d'avancée des pions)
TODO *** bonus pour les pions qu'on peut pousser (cases d'avancées protégées)

PIONS PASSES: 8/5ppk/7p/1P6/1R3P2/1pr5/6PP/6K1 b - - 1 34 ici c'est gagnant pour les blancs: pion noir arrêté et pion blanc protégé!

Complexité de la position qui devrait augmenter l'incertitude (en fonction du nombre d'échecs/captures etc...)

1r1q1rk1/2n4p/p4pNQ/2ppp3/8/8/1PP1N1PP/5R1K w - - 2 26 : Cg3! seul coup qui gagne
1r1q1r1k/2n4p/p2p1p1Q/2ppn3/7N/4R3/1PP1N1PP/5R1K w - - 1 24 : Txe5!! gagne (Lc0 ne le voit pas)
1r1q1rk1/2nn3p/p2p1p1Q/2pp4/4p2N/2N5/1PP3PP/R4R1K w - - 0 21 : les noirs ont dépassé le centre et ont plein de cases faibles
1r1q1rk1/2nnppbp/p2p4/2pP1p2/4P2Q/2N2N2/1PP3PP/R1B2R1K b - - 1 16 : king safety: Fxc3 est catastrophique (cases noirs et retrait d'un défenseur). PB: actuellement ça échange des pièces donc il est content. Sera réglé grâce au potentiel défensif?
r2qk2r/1pnnppbp/p2p2p1/2pP4/P3PP2/2N2N2/1PP3PP/R1BQ1RK1 w kq - 0 11 : f5 très bon coup, car de toute manière, la poussée e5 n'est jamais bonne
r1b2rk1/1p3ppp/p3pn2/2Pp4/1q6/2N2B2/PP3PPP/R2Q1RK1 w - - 2 16 : Ca4 seul coup qui tente un truc? sinon foutu
rnbqkbnr/ppp2ppp/4p3/3pP3/3P4/8/PPP2PPP/RNBQKBNR b KQkq - 0 3 : il faut jouer c5!!
4rk1r/2p3pp/p2p1p2/1p6/1N2q3/1BB3R1/P4PPP/R5K1 b - - 4 5 : y'a déjà pas mal d'attaque sur le roi noir
r4k1r/2p2ppp/p2p4/1p6/1b1Nq3/1B4R1/PB3PPP/R5K1 w - - 0 1 : position pas si claire malgré la dame de plus pour les noirs.. beaucoup de pièces attaquent le roi noir, les pièces sont mal développées, et la dame est au centre
r1bq1rk1/pp3ppp/2n2n2/P1bpp3/8/3BPN2/1PP2PPP/RNBQ1RK1 w - - 0 9 : a6 perd direct à cause de e4
2r3k1/5pp1/7p/pP6/8/1P6/5PPP/4R1K1 w - - 1 29 : f4 gagne (Tc5 -> Te5)
2r3k1/5pp1/7p/pP6/8/1P5P/5PP1/4R1K1 b - - 0 29 : Tc5 fait nulle direct...
r3k2r/5p2/p3pp2/8/P5qp/3Q4/1PP2P1K/3R1R2 w kq - 0 21 : Dd7+ gagne
r4rk1/p4pbp/1q1p1np1/8/1B2p2R/5N2/PPP2PPP/R2Q2K1 w - - 0 19 : Dxd6 gagne...
r2r2k1/p3Bpbp/5np1/8/4p2R/5N2/PPP2PPP/R5K1 b - - 2 21 : Te8 gagne...

8/1p2bkpp/2r1p3/P2pP3/5P2/3K4/1P1B2PP/R7 w - - 4 25 : majorité de pions à l'aile dame: b4, b5 et a6 puis ça va gagner facilement
8/1p2bk1p/4p1p1/PPrpP3/5P2/3K4/3B2PP/R7 w - - 1 27 : a6!

r2qkb1r/ppp2pp1/2n5/3p1b1p/3P4/2P2NP1/P3PPBP/R1BQ1RK1 w kq - 0 10 : gagnant aux blancs... :(
r2qk2r/ppp1bpp1/2n1b3/7p/3PB2N/2P3P1/P4P1P/R1BQ1RK1 w kq - 1 13 : d5?? ça gagne direct...
3rk2r/2p2pp1/2P5/pp2bN1p/4B3/B4PP1/P6P/4RK2 w k - 0 22 : Cxg7+ #3...

3rr1k1/p1pb1p1p/6p1/1p4Q1/3P3P/2P1PN2/P4PP1/R3K2R b KQ - 2 19 : le roi noir n'est pas si bien... il va se faire mater. weak_squares -8? ça devrait être positif vu la gueule des cases noires... + le pion h qui avance...
rk4r1/p1p1q2p/Pp2p3/3p2pQ/8/3P4/1P3PPP/RKR5 b - - 1 17 : peut-être ne pas considérer le roi comme pièce complètement bloquante: la tour a8 pourra en fait jouer...

r7/1p3ppp/2kbb1n1/8/3B4/p5P1/1PP2P1P/2KR1B1R b - - 1 19 : Fd5 gagne
4r1k1/2B2ppp/2P5/8/p2N4/3b3P/1n3PP1/2R3K1 b - - 0 6 : le pion en c6 est protégé par rayon X grâce à la tour en c1
r2q1k1r/2p1pbb1/pp1p1p2/3PnP2/2PNQ3/1P1B3p/PB4PP/R3R1K1 w - - 0 23 : Te3 et on s'active
r4rk1/p4ppp/2n1p3/3p4/2pPbP2/2B1PNP1/1P3K1P/2R4R b - - 3 22 : ici c'est la tour f qui va en b8! l'autre reste sur la colonne a pour pousser ou défendre le pion a
r2q1rk1/2p2ppp/2pbp1b1/p4n2/2PPN3/5N1P/PP3PP1/R1BQR1K1 b - c3 0 13 : quasi égal
7r/2p3pp/3b1p2/p1p1p3/2P1P3/kP2BPKP/P1R3P1/8 b - - 1 29 : les blancs ne sont en fait pas gagnants !
1r3bk1/2p2ppp/p2qr3/3p4/QP2b3/P3P1PP/1B2BP2/2R2RK1 b - - 0 24 : le roi est foutu ! (Th6 -> h4 -> Txh4!!)
8/8/5pk1/2R3pp/3P4/4P2r/5K2/5bN1 w - - 2 50 : Cxh3 gagne
r2q1rk1/1p1nbpp1/p1p1pn1p/8/3PP3/2NB1Q1P/PP3PP1/R1B2RK1 w - - 3 15 : le fou va en f4, pas e3!
r2r2k1/1p3ppp/p2qpnb1/2p1Q3/6P1/2NP3P/PPP2PB1/4R1KR w - - 1 18 : problème de quiescence ici? ne se rend jamais compte que si b7 est pris, il y a toujours b2 qui tombe derrière...
1n2r3/8/1p2P1k1/1P1R4/5p2/5K1P/p7/B7 w - - 4 51 : Td6! pas Te5
3rr1k1/1pp2pp1/p1bqpn1p/P2pN2P/1P1P2P1/2NQPP2/2P3K1/RR6 b - - 6 27 : petit avantage noir
3rqrk1/1pp2ppp/p1b1pn2/3pN3/P2P4/RPNQPP2/2P3PP/5RK1 b - - 0 14 : égal...
r3r1k1/5p2/2p2b1B/p2bpP1Q/8/1Pq4P/6PK/4RR2 w - - 2 29 : Te3 gagne
1r3rk1/p3bppp/2p3b1/1pPqN3/3P2P1/1PB1pP2/P5BP/R3Q1K1 w - - 0 23 : le cheval en e5 peut prendre le fou en g6, donc il faut pas qu'il soit pénalisé comme "trapped piece"
q2r2k1/1p1b2bp/4r1p1/P1PQBp2/1P3P2/5N2/5K1P/R5R1 b - - 0 30 : y'a rien pour les noirs... complètement gagnant pour les blancs
3r1rk1/qp1bbppp/4pn2/2PpB3/PP1Q2P1/5N2/3N1P1P/R3K1R1 b Q - 0 18 : gagnant aux blancs
r4rk1/qp1bbppp/p3pn2/2Pp4/PP1Q1B2/2P2N2/3N1PPP/R3K2R w KQ - 3 15 : quasi gagnant pour les blancs
1r3rk1/p3bppp/2p3b1/1pPqN3/3P2P1/1PB1pP2/P5BP/R3Q1K1 w - - 0 23 : Dxe3?? ça gagne juste facilement...
rn1q1rk1/pb2bppp/1pp1pn2/3pN3/3P1B1P/2N3P1/PP2PPB1/R2QR1K1 w - - 2 12 : mieux aux noirs (pion de plus)
3r1qkr/1bpP1pbp/p7/1p1N3Q/4P3/6PB/PPP4P/5R1K w - - 1 3 : Fe6! gagne
3r2k1/5pp1/ppb3P1/8/5Q2/Pq6/1P3PP1/4R1K1 w - - 1 29 : Dh4 gagne! 3r2k1/6p1/ppb2pP1/8/7Q/Pq6/1P3PP1/4R1K1 w - - 0 30 -> Te7 seul coup gagnant
8/8/1p4pk/p4p1p/Pr1R3P/4KPP1/8/8 w - - 8 45 : Txb4 gagne!
3n1k2/1p3pp1/pb5p/7b/2BN1n2/5N1P/PP3PP1/4R1K1 w - - 0 1 : Ce5!! gagne une pièce (Td8, Cf8, Cg6, Cxf4 et double attaque (h5 et e8))
3rr1k1/2p2pp1/1pn2q1p/p2p4/2bPnB2/2P2NP1/P1Q1PPBP/3RR1K1 b - - 3 18 : Td7 est bien plus harmonieux que Te7...
rn2kb1r/ppp2ppp/4qn2/8/3Pp3/2N2B2/PPP2PPP/R1BQ1RK1 w kq - 0 9 : Cxe4!
r7/p4B1k/5Qpb/q2p1N2/5p2/7n/2P3PK/8 b - - 0 32 : mat imparrable pour les blancs
4rk2/ppp1r3/2q5/3p1pNP/3B4/5N2/P4PK1/R6R w - - 2 25 : h6 et c'est l'autoroute pour ce pion passé
2Q5/q3krR1/rp6/p2pB3/8/P7/P1p2P1P/4n2K w - - 3 38 : Fd6!! #9
8/q4r2/rp6/pk1p4/6R1/P3Q3/P1p2P1P/4n2K w - - 8 43 : Dc3 et #4 imparrable
r3r1k1/1ppq1ppp/p1np1n2/2b1p2b/P1B1P3/2PP1NNP/1P3PP1/R1BQR1K1 b - - 3 12 : ici faut mettre le fou en g6 et ne pas le donner contre le cavalier
8/8/6k1/5p2/8/4K3/R7/5r2 w - - 0 60 : il faut absolument rester au contact du pion passé avec le roi. Rd4, ça perd!
2r2rk1/1pq3p1/p4np1/3p2Q1/3PpR2/PP2P2P/2P3PK/1NR5 b - - 1 30 : Ch5 ça gagne juste la tour! il faut absolument taper sur les pièces clouées!
r2q1rk1/1p4p1/p2p1np1/3p1b2/3P3Q/P1N1P2P/1PPN2P1/R4RK1 w - - 1 24 : Cf3 pour Cg5 gagne
r2q1rk1/1p2npp1/p2p1n1p/3p4/3P2b1/P1NBP3/1PPN1QPP/R4RK1 w - - 2 18 : Dg3 seul coup qui gagne (menace Txf6, puis h3 pour gagner le fou en g4)
r1q2rk1/pp2np2/3p1p1p/1B1p4/3P2b1/P1N1P1Q1/1PPN2PP/R5K1 w - - 2 19 : h3, c'est une pièce
r2q1rk1/pp2npp1/3p1n1p/1B1p4/3P2b1/P1N1P3/1PPN2PP/R3QRK1 w - - 5 17 : Txf6!! gagne (Dg3 ensuite va gagner le fou en g4)
rnbqk2r/pp3ppp/3ppn2/3p4/3P4/4PN2/PPP2PPP/RN1QKB1R w KQkq - 0 6 : c4 meilleur coup: il faut attaquer ce centre si possible
Q1Q5/5k2/3b1r2/2pK4/8/2P5/1P6/5q2 w - - 0 71 : roi noir mat (car les blancs ont le trait). Augmenter la valeur des échecs si on a le trait?
3b1k2/7p/1p2Kp1P/p1pQp1r1/P7/2P5/1P6/8 b - - 3 49 : c'est le roi noir qui est mat
r4r2/3q1pk1/1p1b1p2/p1p5/8/5Q2/PP3PPP/3RR1K1 w - - 1 23 : Txd6 gagne (pour Dg4 puis Te3)
r1r3k1/pp1n1p2/3q2p1/P1pP1p2/5P2/1Q4P1/1P3PB1/2RR2K1 w - - 1 2 : Db7
1r4k1/p1qn1p2/2P3p1/P1p2p2/5P2/6P1/1P3PB1/2RR2K1 w - - 1 5 : Td7 seul coup qui gagne
2r3k1/pRP2p2/6p1/q1p2p2/5P2/6P1/1P3PB1/2R3K1 w - - 1 8 : b4 seul coup qui gagne
2r4r/4k1pp/1n1bp3/p1p1p3/1p1nB3/1P2BP2/NKP3PP/3RR3 b - - 1 22 : complètement perdant pour les blancs
8/1N2k2p/p3p3/P2pP3/3P1qPp/2R2P2/1P2b3/3R3K w - - 1 40 : gagnant pour les blancs
r1b1kb1r/pp1p1ppp/2n2n2/qN2p3/4P3/2N5/PPP2PPP/R1BQKB1R w KQkq - 2 7 : Fd2 gagne
rnbq1rk1/pp3pp1/2pbpn1p/3p4/3P4/2NBPN2/PPP2PPP/R1BQ1RK1 w - - 2 9 : e4 c'est la seule idée de la position! :'( implémenter backwards pawns? il à peur de f5 en fin de variante...
rnbq1rk1/pp2bppp/2p1pn2/3p4/3P4/2NBPN2/PPP2PPP/R1BQ1RK1 w - d6 0 7 : e4 important! : rnbq1rk1/pp2bppp/2p1pn2/3p4/3P4/2NBPN2/PPP2PPP/R1BQ1RK1 w - - 0 7 vs rnbq1rk1/pp2bppp/2p1p3/8/3PB3/5N2/PPP2PPP/R1BQ1RK1 b - - 0 9
r3k1nr/4p1b1/p1n1P1p1/1ppq1p1p/3p4/3P1N2/PPPNQPPP/R1B1R1K1 w kq - 4 17 : gagnant pour les blancs
2rr3k/5pp1/8/nB6/8/P4P2/1B3P1P/4R1K1 b - - 0 29 noirs un peu mieux (qualité de plus)
r2q1k1r/pppb2pp/1bn1p3/P2pP2Q/1P3P2/2PB4/6PP/RNB1K2R b KQ - 0 13 : fou en b6 enfermé!
r1bk1bnr/p1p2ppp/2p5/8/8/2N2N2/PP3PPP/R1B2RK1 b - - 0 10 : égal, légèrement mieux aux noirs
r1b2bnr/pp3k1p/3p4/2pN1n2/2Q5/4B3/PPP3PP/5RK1 w - - 1 18 : y'a quand-même beaucoup d'attaque ici
1r4k1/p2Q1ppp/8/8/2qPbB2/4P3/3R1PPP/4KB1R b - - 2 23 : mat imparrable pour les noirs
1rr3k1/p2Q1ppp/6b1/8/1q1P1B2/4P3/4KPPP/3R1BNR b - - 1 19 : Fe4 gagne
1r4k1/p2Q1ppp/8/8/1q1PbB2/4P3/2rNKPPP/3R1B1R b - - 5 21 : Txd2 #6
1q4rr/1p1bkn1p/1Pp1p1pP/2Pp1pP1/3P1P2/Q2BPN2/5K1R/R7 b - - 2 40 : aucun jeu possible pour les noirs, ils sont complètement enfermés
3b2kr/1p3pp1/1q2bn2/1Np4p/5Q2/P1N5/1PP1BPPP/1K5R b - - 1 20 : complètement gagnant aux blancs
rnb1kbnr/ppp2ppp/8/3q4/3N4/8/PPP2PPP/RNBQKB1R b KQkq - 0 5 : c5 erreur... le roi reste trop longtemps au centre...
8/8/2p4k/2Pp4/3P1n2/8/3K4/8 w - - 0 58 : attacking potential égal pour les blancs et noirs??
8/8/2p2k2/2Pp4/3P1PKP/8/8/1n6 w - - 0 51 : noirs gagnants
3k4/1p5R/8/p1P2PrP/2P5/7K/7B/7r w - - 0 53 : noirs gagnants
4R3/p4pkp/2p2pb1/qp1p4/3P3N/PRPB2PP/2Pn1P2/6K1 w - - 1 22 : noirs gagnants
4rrk1/p2q1pp1/2p3p1/1p2B1Pn/2pP3P/2P2Q2/2P2P2/R3R1K1 w - - 3 25 : le cavalier en h5 est considéré comme trap alors qu'il est bon...
r1br1nk1/pp3p1p/2p1n1pb/3p4/3P2P1/2NB1N1P/PPP1RP1B/4R1K1 w - - 3 22 : c'est bien d'avoir les tours sur la colonne e, mais elles sont pas actives... à revoir
4rrk1/p4p1p/2p2p2/qp1p3b/2nP4/PRPB1N1P/2P1QPP1/4R1K1 w - - 2 18 : Dd1 meilleur que Dxe8
1rb1k1nB/pppp3p/2n3q1/2bN4/6P1/5Q2/PPP4P/R4R1K w - - 1 18 : le roi se fait mater
3r2k1/2p1Rppp/1b6/pp1p4/3P4/2P5/PP3P2/R4K2 b - - 1 8 : blancs mieux
5k2/2p2Ppp/2p5/pp1r4/8/2PP1q2/PPQ2P1K/R3R3 w - - 1 17 : gagnant pour les noirs
3r2k1/2p2ppp/1bp1r3/pp1P4/5B2/2PPN2q/PPQ1BP2/R3R1K1 b - - 0 1 : Fxe3 gagne!
3r2k1/2p2ppp/1bp1rn2/pp6/4PB2/2PPN2q/PPQ1BP2/R3R1K1 b - - 5 10 : Cd5!! (encore plus fort que Cxe4)
2r1r3/pQ4bp/2n2kp1/5bq1/4p3/B1P4P/PP1NRPP1/R5K1 w - - 1 24 : Td1 gagne
r2qr1k1/pp3pbp/2n1bnp1/2Bpp3/4P3/1BP2N1P/PP1N1PP1/R2QR1K1 w - - 4 16 : pourquoi Fa3?
4q1k1/3n1p2/1p1B1b2/pNpP3p/P1P5/1P3P1P/3Q4/7K w - - 0 39 : ici faut pas faire h4 -_-...
6k1/2Bnqpb1/1p4p1/pNpP3p/P1P5/1P5P/3Q1PPK/8 w - - 1 32 : f3 affaiblit le roi blanc, et les cases noires
r3r1k1/p2qbppp/1p3n2/2pPR3/8/2N4P/PPPB1PP1/R2Q2K1 w - - 1 17 : Te3 -> manque d'harmonie! ça bloque le fou en d2
3rr1k1/pp2bp2/1q1pbn1Q/2p5/4P2P/2N5/PPP2PP1/1K1R1B1R w - - 1 18 : Td3 gagne
3r1k2/2p4p/6r1/1Q2P3/4b1q1/b1P5/P2NRK1P/3R4 b - - 1 31 : seulement 53% de confiance... ça devrait être plus...
r2qk3/pp3pp1/2n1pb2/2pp4/5Pp1/1PPbP3/PB4PK/RN1BQR2 b q - 0 15 : g3!
r2qk3/pp3pp1/2n1pb2/2pp4/5P2/1PPbP1p1/PB4P1/RN1BQRK1 b q - 1 16 : Fxc3! (pour Dh4)
r4r1k/1p5p/2p1b1p1/p2pP1n1/5Pq1/4P1N1/PPQ1B1K1/4R2R b - - 1 27 : Dame noire enfermée
r4r1k/1p3n1p/2p1b1p1/p2pPp2/5PPq/3BP1NP/PPQ3K1/4RR2 b - - 2 24 : prise g4 est mauvais! (hxg4 puis Th1 arrivent en contrant sur le roi noir)
r4r1k/1p2q1pp/2p1b3/p3Pp2/4pP2/1P2P2P/P1Q1N1P1/1R3RK1 b - - 0 23 : quasi gagnant aux blancs: le fou de cases blanches est pris dans les pions; pion e5: passé et protégé
r1bqk1nr/1pppbpp1/p1n1p3/1B2P2p/3P4/2P2N2/PP3PPP/RNBQK2R w KQkq - 0 7 : faut pas prendre ce cheval en c6!!!
r1bq1rk1/ppp1bp1p/2n1p1p1/4P2P/2pP4/2P1B3/P1Q1NPP1/R3KB1R w KQ - 0 12 : gagnant aux blancs : structure saine, harmonie, attaque sur le roi noir faible
rn1q1r1n/pb2bppk/1ppp4/5P2/3P4/2N5/PPP1B1PP/R1BQ1RK1 w - - 1 13 : Tf3! faut ramener des pièces à l'attaque... sinon foutu
r3r1k1/5pb1/1q2b2B/p1p1p2Q/Rp2P3/1P4RP/1PP2PP1/6K1 b - - 5 26 : foutu pour les noirs...
r1bqk2r/1pp2pp1/p3p2p/3pP3/n4P2/P1BBP3/1PP3PP/R2Q1RK1 w kq - 1 13 : Dg4 gagne
rn1q1b1r/pp3Qpk/2p1p2p/3nNb2/2BP4/8/PPP2PPP/R1B1K2R w KQ - 2 12 : Fxh6!! (moins pire)
6R1/2r5/pr2p3/4np2/1p5p/4kB1P/PPPR2P1/2K5 w - - 12 34 : le roi noir ne sue même pas (légèrement mieux aux noirs)
rn2k2r/1b1p1p1p/p1q4B/Pp2pN2/4n3/2P3P1/1P4BP/RN2Q2K w - - 0 19 : Dxe4! vérifier la quiescence...
1r1q1rk1/p1p2pp1/3b1n1p/3b4/1P1N3B/2P5/P4PPP/RN1QR1K1 b - b3 0 14 : le fou est mieux en a8 que b7 ici
r1k4r/pppb1ppp/2p2n2/6B1/4P3/2P2P2/P1P3PP/2KR1B1R w - - 3 12 : mieux vaut garder le fou f6 ici
r4rk1/p5pp/2pp3q/2p1p3/4Pp2/P2P1N1b/1PP1QP2/1N2RRK1 w - - 3 19 : les blancs se font mater
2Q3nk/5p1q/4rP1p/7P/2P5/3P4/5RPK/8 w - - 0 47 : Dxe6!!
r5nk/5p1q/1Q2nP1p/p6P/8/2PP2R1/1P3RP1/7K b - - 0 39 : la dame noire n'a pas de cases où aller... le cavalier en g8 non plus. et le pion en f6 est une vraie épine
3r1r2/2p1npk1/1p2q1pp/p3p3/n1N1P2N/2PP1R2/1P2Q1PP/5R1K w - - 0 23 : Cf5!!
rnb2qkr/pppp4/5B2/8/3P4/6b1/PPP4p/RN1Q1R1K w - - 1 6 : c'est le roi noir qui est faible. Le pion h2 protège le roi blanc. Le fait qu'il soit sur le bord aussi?
r3r1k1/ppp2ppp/2nq4/4p3/2P3b1/3PPN2/PP2B1PP/R2QR1K1 b - - 0 13 : ici, noirs gagnants... pions très faible en e3
2r2rk1/1p4p1/p3p3/qn2PpP1/2pP1P2/2P5/PPQ5/2KR1R2 w - - 1 28 : g6 créé un mating net sur le roi!
8/8/8/2K2kPp/5P2/1P6/8/8 w - - 1 48 : Rd4 seul coup qui gagne
2rr2k1/1p2bp1p/pq2bpp1/2pn4/2N1N3/PP1PPB2/1Q3PPP/2R2RK1 b - - 0 1 : noirs gagnants
8/8/3P1pp1/p4p1p/P1K2P1P/6k1/8/8 b - - 0 43 : carré du pion!!! blancs complètement gagnants
8/1p3pk1/p5p1/4qp1p/2Q4P/1P2P1P1/P4PK1/8 w - - 0 32 : Dd4!! il faut faire...
8/1p3pk1/p4qp1/4bp1p/2Q4P/1P2PNP1/P4PK1/8 b - - 0 30 : plutôt égal, mais pas mieux aux noirs... les pions blancs sur cases noires bloquent bien le fou..
8/6pk/2R4p/8/2K3P1/7P/4r3/8 b - g3 0 40 : Tc2 gagne
8/7p/5K2/1pkr1P2/4R3/8/P7/8 w - - 1 58 : Te5!! et finale de pions largement gagnante. Faire pions passés++ en finales de pions? ou carré du roi?
1k6/2r2R2/8/p3p3/4P2P/P4P2/5K2/8 w - - 1 50 : beaucoup plus simple de gagner après Txc7... finale de pion évidente
rnbqkbnr/ppp1p1pp/3p4/5P2/8/8/PPPP1PPP/RNBQKBNR w KQkq - 0 3 : stop le greed, faut faire Dh5+!
5k2/7R/8/6R1/P2rP3/q1N5/2K5/8 w - - 1 50 : blancs mieux......
rn1qkb1r/ppp2ppp/4pn2/3p1b2/2PP4/2N2N2/PP2PPPP/R1BQKB1R w KQkq - 2 5 : il regarde jamais les coups genre Db3, alors que c'est un bon coup... (développement de la dame + attaque b7 faible)
rn1q1rk1/1pp3pp/2bbp3/5p2/3P4/P1NQPN2/3B1PPP/R4RK1 w - - 2 18 : mieux aux noirs mais pas gagnant!
r5k1/1pR2ppb/7p/1r1pn3/8/P3P1PP/3N1PB1/R5K1 w - - 1 24 : blancs mieux mais pas gagnants... la tour en b5 n'est pas sur une colonne ouverte, mais reste très active... (si on retire le pion b7, ça va augmenter la valeur de la tour? bof...)
R3r1k1/1P3p2/3p2p1/5n2/4rb2/2P1p2P/4N3/2BK4 b - - 1 35 : Fh2 seul coup (Tc8 est menacé)
8/p1rq1pk1/R1pb2p1/3p3p/QP1Pp1bP/P3B1P1/4PPB1/6K1 w - - 1 26 : blancs mieux. faiblesse en c6
1k1r2nr/pp6/2pbb1p1/P3p2p/3q1p2/2NP4/1PP1QPPP/RNB1R1K1 w - h6 0 18 : la dame noire est trap
r3k2r/pp2nppp/2n1b3/1B2N3/3q4/2N4P/PPPP2P1/R1BQK2R b kq - 2 11 : faut prendre e5!! pas roquer...
rnbqk1nr/ppp2ppp/8/2bpp3/8/1P4P1/PBPPPPBP/RN1QK1NR b KQkq - 2 4 : faut pas faire d4 ici... :(
r2q1rk1/1pp2p1p/p3nbp1/4p3/4N3/2P2P1Q/PPB2P1P/2KR2R1 b - - 2 19 : king safety.. ???
r3k2r/p2b1ppp/2nQp3/1pB1N3/8/1B6/P3KPPP/7q b kq - 1 17 : revoir king safety: mat pour les blancs
r2q1rk1/pp2bpp1/4b2p/2pn4/2Bp4/3P1NBP/PPP2PP1/R2Q1RK1 w - - 2 14 : square controls meilleur pour les noirs?? les blancs controlent e4 et c4 quand même...
r1bq1rk1/pp2bpp1/7p/2pn4/2Bp1B2/3P1N1P/PPP2PP1/R2Q1RK1 w - - 0 13 : le cavalier est pas si fort en d5 (il tape dans des cases controllées...) -> faut pas échanger le fou pour ça
2r2rk1/3n1ppp/1p2p3/p2pP3/P2N3q/2PQ4/1P3PPP/R3R1K1 w - - 0 23 : Te3 est le bon plan. elle sera plus active devant les pions que en e1
5rk1/p3pp1p/2Q3p1/8/8/1Q2n2P/P2q1bP1/2R4K w - - 2 34 : Dcc3 seul coup qui gagne... 2 dames ça se marche dessus.. il faut les échanger
r4rk1/p2nppbp/5qp1/2pP4/5B2/2PQ4/P3NPPP/1R3RK1 w - - 1 21 : petit avantage blanc, mais loin d'être gagnant... activité des blancs un peu surévaluée?
r1b1kb1r/p4ppp/1pn1p3/2p5/2P1N3/5N2/PPP2PPP/R1BR2K1 w kq - 0 10 : finale meilleure aux noirs...
b2r2k1/2p3pn/p7/3p2Pp/2P4P/2N1B2q/P3Q3/5RK1 w - - 2 32 : le roi blanc est foutu.. pourquoi protection est la même pour les deux, alors que les noirs ont un pion en g7, et les blancs ont leur pion en g5??
3r2k1/pp1Q1p1p/3r1p2/4pb2/3P4/P4P2/P3N1PP/2RR2K1 b - - 0 19 : ici on veut prendre de la tour 8, car la tour est plus active en d6
2rq1rk1/pp2bppp/2b1pn2/3p4/2pP1B2/2P1P3/PPBN1PPP/R2QR1K1 b - - 3 12 : comment faire comprendre qu'il faut jouer du côté où pointe la structure? ici b5 est le meilleur coup... sinon la structure se fait attaquer...
2rq1rk1/p4ppp/2b1pn2/3p4/1bpP1B2/4P3/PPBN1PPP/2RQR1K1 w - - 0 15 > 2rq1rk1/pp2bppp/2b1pn2/3p4/2pP1B2/2P1P3/PPBN1PPP/R2QR1K1 b - - 3 12
8/3k4/2p5/1pb5/4B3/1KB5/8/8 b - - 1 134 : draw.....
2rk1r2/p1pnb2R/1p2Q1p1/2q3P1/6N1/2BB4/PPP5/1K6 w - - 1 30 : il faut comprendre qu'un coup comme a3 est important pour éviter les problèmes de dernière rangée
r1bq1rk1/p1p1bppp/1p2pn2/8/3P4/3BBN2/PPP1QPPP/R3K2R w KQ - 0 10 : ici, mieux vaut faire grand roque que petit roque
7r/2pk4/2q5/3p2p1/1BNPp3/4Pp1r/Q4P2/2R1R1K1 w - - 1 47 : c'est mat pour les noirs
4q1k1/2Q5/4p1p1/1pPp2b1/1P2p3/8/6P1/5R1K w - - 0 47 : sait pas gagner ça aux blancs... se fait rouler dessus par les pions passés liés...
6k1/2R3pp/8/pp6/4r3/2P2K1P/6P1/8 b - - 1 33 : Tc4 devrait être instantané! si les tours sont échangées, le pion passé éloigné rend la position gagnante pour les noirs
5Rqk/1ppR2pp/p7/8/4r3/2P4P/6P1/6K1 w - - 2 30 : Tdd8??? ça gagne en 1 coup, et il regarde même pas le coup...
r1br2k1/1pp1bppp/p1n1pn2/6B1/Pq1P4/1BN2N1P/1PP1QPP1/3R1RK1 w - - 1 16 : blancs gagnants...
r4rk1/2pq4/1pn1pp2/3p2pp/pPnP4/P1P3P1/2Q1PPBP/R1B1R1K1 b - - 1 20 : les blancs sont quasi gagnants...
6RK/8/1k6/8/2p5/8/8/8 w - - 0 1 : Tg5 seul coup qui gagne
8/8/3k2b1/1p5p/1P1K2p1/1B4P1/7P/8 w - - 6 12 : tu gagnes parce que t'as le bon fou?? même après Re3 Re5, ça gagne...
8/8/8/1k1K3p/6p1/6P1/7P/8 w - - 0 25 : le roi blanc est BEAUCOUP plus proche
8/8/3k2b1/1p5p/1P1K2p1/1B4P1/7P/8 w - - 6 12 : finale gagnante pour les blancs (même si le trait est au noir): le roi blanc est beaucoup plus proche de rentrer...
r2q1r2/5pk1/R2pbnnp/4p1p1/1Pp1P3/2P1PNB1/2B1Q1PP/5RK1 w - - 4 7 : le fou g3 ne sert à rien
1rbq1r2/2p2pk1/p2p1nnp/1p2p1p1/P3P3/2PPPNB1/1PB3PP/R2Q1RK1 b - - 0 r2q1rk1/pbp1bppp/1p2pn2/8/3P4/3BBN2/PPP1QPPP/R4RK1 b - - 2 111 : c5 donne certes la case d5, mais elle est très difficile à être atteinte par une pièce.. puis ça contrôle aussi le centre et prend l'espace
1r3r2/2p2pk1/1b1p1qn1/4p3/4P1b1/NBPP1N1p/1P3PPB/R2Q1R1K w - - 0 9 : noirs gagnants
1rbq1r2/2p2pk1/1b1p1nn1/4p1N1/4P3/NBPP1QP1/1P4PP/R4R1K b - - 0 7 : les cavaliers protègent bien le roi..
5r2/5pk1/r1pp1qn1/4p2p/4P3/2P1QpB1/BP2b1PP/R5RK w - - 6 29 : complètement gagnant pour les noirs...
rnb2rk1/pp4pp/3qp3/3p1p2/2pPn3/4P3/PPPNBPPP/R1BQ1RK1 w - - 0 11 : prise e4 puis b3 et ça gagne...
rnb2rk1/p5pp/3qp3/1P1p4/3P1p2/4PP2/1pPBB1PP/R2Q1RK1 w - - 0 16 : ce pion est chiant, mais très faible...
r1r2Q2/2k5/p1pp1P2/1p3Q2/2P2N2/4PR2/PP5P/6K1 w - - 1 40 : à haute profondeur ça monte jusqu'à +250 xDD, puis il trouve un mat en 11 (tout en regardant que Ce6+... y'a d'autres coups)
r1bqk2r/pp3ppp/2n2n2/2b1p3/2P5/2NPB3/PP3PPP/R2QKBNR b KQkq - 2 7 : faut prendre e3! (il fait Fb4?) -> pion e3 faible un peu
5k2/r2n2pp/p2R4/2pB1p2/5B2/8/Pq4PP/4R1K1 w - - 0 26 : Rf1!!
rn5k/6pp/p2bp3/1P1b2q1/2p5/5B2/PP2Q1PP/3R1RK1 w - - 2 20 : Fxd5?? y'a des mats du couloir derrière...
3r1qk1/1pr3b1/pN1pbnpp/2p1p3/P1P1P3/4BP2/1P1QB1PP/3R1RK1 w - - 2 22 : blancs quasi gagnants
r7/qp1n1ppk/1r1p1n1p/1P1PpP2/pPP3P1/3QP2P/R5BK/R7 w - - 5 11 : e4 important ici! faut pas laisser les noirs s'activer
r4rk1/5pbp/2p2np1/pp1p1q2/5P1P/P1N1P1Pb/1PPBB3/R3QRK1 w - - 1 18 : blancs perdants
2b1r1k1/qp3ppn/r1pp1n1p/p2Pp3/P1P1P1P1/NP1QP1NP/5RB1/5RK1 w - - 0 1 : Cb5!! bloque la tour complètement après prise/prise
r1bqk1nr/p4ppp/2nbp3/3p4/Pp1P4/1Pp1PN2/2P1BPPP/RNBQK2R w KQkq - 0 10 : pièces blanches complètement enfermées !!
rn2kb1r/p4ppp/4bn2/1Pp5/2p1P3/5P2/1P4PP/RNBK1BNR b kq - 0 9 : blancs gagnants
2b2rk1/2r2pp1/2pq4/2b1pPN1/p1B1P1Q1/P6R/2P4P/5R1K w - - 9 33 : Fe6 gagne
2r2r2/pb3p1k/1pn1pBp1/3qP3/3P4/5N2/P2Q1PPP/2R2RK1 w - - 4 22 : il veut jouer h3...
rr4k1/2q1bpp1/2p1p1p1/p1n5/N4PPP/1P1P4/1PKBQ3/6RR w - - 1 3 : ici faut faire Fc3 ou h5 pour tenter quelque chose, sinon c'est foutu. h5 augmente l'incertitude et donc les chances de gain
3q1rk1/4bppp/r3bn2/3p4/2p5/P3BN2/1PPQ1PPP/2KRRB2 w - - 0 6 : gagnant pour les noirs
5rk1/5ppp/4bn2/q2p4/2p5/b1P1BN2/3Q1PPP/1K1RRB2 w - - 2 9 : roi blanc est mat
r4Nk1/pp3ppp/8/q2p4/2p1n3/b1P1B3/1PP1QPPP/2KRRB2 b - - 0 6 : Fb4 #4
rnb1kbnr/pppp1ppp/2q1p3/8/2PP4/5N2/PP1BPPPP/RN1QKB1R w KQkq - 5 5 : ici Cc3 est mieux que Ce5. une pièce développée en plus, est mieux que mettre une pièce développée au centre
r2qkbnr/2p1pppp/p1p5/3p3b/3P4/4PN1P/PPP2PP1/RNBQK2R w KQkq - 1 7 : ici Cc3 bloque le pion c4 -> erreur
r2qr1k1/pp1n1pp1/2pbbp1p/3p4/3P4/P1NBPN1P/1PPQ1PP1/R4RK1 w - - 2 12 : ici il fait h4 pour: weak square+, et bishop_pawns+... (car h4 octroie la case f4...)
2bk1r2/4b1Qp/2q5/1p6/n1pP4/8/1P2NPPP/R1K2B1R b - - 2 22 : c3 gagne
3kr3/3b2Qp/1nq5/1p1n4/1bpP1B2/8/1P2NPPP/R2K1B1R w - - 1 20 : gagnant pour les noirs: combinaison d'activité monstre, roi blanc au centre peu protégé, et tours et fou blancs inactifs
2bk4/6Qp/1n3p2/1p6/1b1P3B/5K2/2q2PPP/R4B1R b - - 3 25 : le roi blanc est mat (en 7)
3r2k1/2pq2p1/p3p2p/3P1r2/1PP4P/3Q1pP1/5P2/R3R1K1 w - - 1 48 : il regarde jamais loin?
6R1/5p2/5kp1/2q5/pp4B1/2n1R3/5PKP/8 b - - 5 45 : roi noir pas en danger
1k1r3r/p2np1bp/Ppp1qp2/6p1/3PP3/2NNQ3/1PP3PP/R4RK1 w - - 0 19 : a6 est une vraie épine pour le roi noir
r1b1k2r/ppp2pp1/2p5/4q3/3bP1p1/2N4P/PPP2PP1/R1B1QRK1 w kq - 0 12 : ici y'a une ligne semi ouverte avec une tour dessus, c'est fort...
r1br2k1/pp2pp2/6pB/4n2Q/2qpB3/6R1/2P2PP1/4R1K1 b - - 5 21 : c'est quasi mat ici, beaucoup de pièces en attaque
8/pp4p1/5p2/2Pkp1p1/P1n5/2BKPP2/6PP/8 b - - 2 40 : king proximity à fix, sinon il hésite même à prendre le pion...
r2r4/7Q/1p1q2P1/2b3k1/5pP1/pP2pP2/7P/1K6 w - - 19 16 : ici il met 0 réflexion sur les autres coups que Dh5 dont il connait le résultat.. il itère sur une branche "morte".. il faut regarder les autres coups aussi
rnb1kb1r/pppp1ppp/5n2/8/4q3/5N2/PPPPBPPP/RNBQK2R b KQkq - 1 5 : déjà il est chiant à faire Fd6.. ça augmente l'attaque sur le roi.. ?? il a peur de faire d5??
-> Iterations <= 0 dans GrogrosZero /!\
2rq1rk1/1p1b1pp1/p1n2b1p/P2p3n/1P4P1/2PB1N1P/1Q1N1P1B/R2R2K1 b - g3 0 21 : cavalier enfermé
2r1brk1/6bp/p2pPpp1/qppN4/8/1P3NP1/P1Q2PP1/4RBK1 b - - 1 25 : blancs quasi gagnants: grosse case en d5, pion e6 très fort (passé + contrôle des cases). case faible plus forte quand elle bloque un pion? d3 et d4 sont considérées comme faibles pour les blancs... à revoir. pas vraiment de plans pour les noirs. pas de faiblesses pour les blancs
8/2p3p1/p1p5/P1P3p1/1P4P1/1K3k2/8/8 w - - 2 69 : fix king proximity!!
5rk1/Qbp2pp1/1pq1p2p/3p4/8/P1P1P3/2P2PPP/R3R1K1 w - - 0 21 : la dame est enfermée.. trapped pieces??
r2q1rk1/4bppp/2P1p3/p1np4/P7/4P3/1BP2PPP/RN1Q1RK1 b - - 0 14 : il dit que y'a du Dd4 sur chaque coup, et ne regarde jamais plus loin (en fait y'a Ff6 derrière...). Les noirs sont mieux
2q2rk1/2r3pp/4pb2/1p2p3/1P2B3/P4P2/1B4PP/3RQ1K1 w - - 4 29 : ici les tours sont meilleures que les fous.. les noirs sont gagnants
r2qk2r/pb1pbpp1/1pn4n/2p1P2p/8/2NB1N1P/PP1BQPP1/R3R1K1 w kq - 1 13 : la tour, tu la mets en d1, pas c1!... (à cause de piece mobility)
rn2k1r1/8/2p1bp1p/1p1qp3/5p2/pPbP1NP1/P1BNQP1P/1R3KR1 w q - 0 22 : Ce4 gagne...
r3k1r1/3n4/2p1qp1p/1p2p3/1P3p2/p1NP1NPb/P1B1QPRP/1R3K2 b q - 0 25 : blancs gagnants (clouage fou-tour mal jugé?)
r3k1r1/3n4/2p1qp1p/1p2p3/1P3p2/p1NP1NP1/P1B1QPKP/1R6 b q - 0 26 : blancs gagnants
1r3r2/1nqb2bk/3p2pp/3Ppp2/p1P5/2BB1N1P/3Q1PP1/R3R1K1 w - - 0 29 : noirs gagnants
1r1nqr2/p3ppbk/1p1p2pp/3P4/bP6/3BBN1P/2PQ1PP1/1R1R2K1 w - - 0 20 : b5 enferme le fou -> même si c'est pas en a8, il est enfermé
r1bk1b1r/pp4pp/2p2n2/3p1p2/3B4/2NB4/PPP2PPP/3RR1K1 w - - 0 15 : égal
-> 3rk1r1/ppp2p1p/1b2b3/8/1P3Q2/2q5/P2N1PPP/3RKB1R b K - 1 17 : foutu pour les blancs
-> Quand y'a plein d'options équivalentes, pas besoin de passer trop de temps pour décider laquelle choisir... Réfléchir un max sur les positions critiques (quand y'a des prises, poussées de pions, échecs...)
3r2k1/1q1n1ppp/2p3b1/p1P3N1/PrPB4/6PP/R2N1PB1/2Q3K1 w - - 3 29 : ici Rh2 est urgent! il y a une grosse ligne ouverte sur le roi.. remettre virtual_mobility?
-> Implémenter les plans (on regarde des coups à la suite, sans que l'autre joueur ne joue)
-> Si pas de plan possible, gros malus (= zugzwang long terme?). Exemple: 2Rnk3/3p2p1/3Pp2r/1b2P1Np/7P/5P1K/6P1/8 b - - 1 43
1R1nk3/1b1p2p1/1K1Pp2r/4P1NP/6P1/8/8/8 b - - 14 53 : les noirs sont foutus
r4rk1/1ppqbpp1/p1n1b2p/3p4/3P1B2/2PB1N2/PPQ2PPP/2R1R1K1 w - - 1 15 : ici, les +300 sur le roi noir à cause de la batterie dame/fou, ça casse tout...
3brrk1/1ppq1pp1/p6p/3pB3/3P1Pb1/2PBR1P1/PPQ4P/4R1K1 w - - 1 21 : les noirs sont quasi gagnants.. le roi noir est safe
r2qr1k1/pp3ppp/5n2/2b1n3/2P1pNP1/1PNb3P/PB1P1PB1/R2QKR2 b Q - 5 15 : king safety?? le roi blanc est foutu...
r2qr1k1/pp3ppp/5n2/2b5/2P2NP1/1PNb1p1P/PB1P1P2/R2QKR2 w Q - 0 17 : ...
-> Rajouter les lignes horizontales ouvertes (faiblesse première rangée, ça arrive souvent)
-> Gérer quand le buffer est plein
1rb4r/2pn1kb1/p2p1p1q/P2PpPp1/2P1N3/2B1PB2/6QP/1R3R1K w - - 8 32 : Fb2??? mais prends cette tour en b8!!!
7r/2pb1kb1/p4p2/P1pPpPp1/2P1P2q/2B2B2/6QP/4R2K w - - 1 40 : vas en b1, pas g1!!
7r/2pb1kb1/p4p2/P1pPpPp1/2P1P2q/2B2B2/6QP/6RK b - - 2 40 : le roi noir est safe... diags, y'a R (la pos est fermée)
1r1qr3/5p1k/3p1Ppb/p2N3p/2pPP2P/2Pn3B/P3QR2/5RK1 w - - 1 22 : attaque +500 pour les blancs??... à causes des attaques sur f5 et h5?
-> Pour les overload, on a retiré les rayons X à travers les pions. faut-il les garder dans le cas où le pion attaque directement une pièce sur la diagonale?
-> Refaire toute l'activité des pièces? en fonction des pions plutôt, et pénaliser les pièces qui sont bloquées par les pions adverses? -> vrai trapped pieces...
2bq1k1r/br3p2/p2p2n1/npp1p2p/4P1pP/2PPN1B1/PPBN1PP1/R3QR1K w - - 0 1 : il veut Rg1, alors que le roi est mieux en h1 ?? rook activity augmente quand on le fait...
r1bqr1k1/pp3p2/4pn1p/2P3p1/1P1N4/3B2P1/P4PP1/R2QR1K1 b - - 0 19 : prise en g3, et d4 n'est pas comestible... la quiescence ne va pas assez loin?
rn2kb1r/p4ppp/1pp1pn2/2Pp1b2/3P4/1N5P/PP2PPB1/R1B1K1NR w KQkq - 1 10 : rook activity qui augmente de beaucoup après Th2... faut trouver un truc...
6r1/p2b3r/2p5/4R2B/Pk3Bp1/1P6/5PP1/6K1 w - - 4 31 : king safety? le roi noir se promène...
r2qk2r/p1p3pp/2pbp3/5bp1/2PP4/2N2N2/PPR2PPP/3Q1RK1 b kq - 0 13 : structure de pions +4??? il prend même pas la tour...
r1bqk2r/ppp2ppp/1bn5/4p1N1/3Pp3/2P5/PP3PPP/RNBQ1RK1 b kq - 1 9 : là y'a plein de coups qui marchent.. même exd4
-> Prioriser les coups qui n'ont pas regardé toutes les réponses de l'adversaire en entier??
-> Position ouverte/fermée = nombre de pions bloqués? (avec plus de valeurs pour les pions centraux)
-> Quand un coup n'est pas fully explored, il faut absolument le choisir..
-> r2qr1k1/pp3ppp/2nb1n2/4p3/2P3P1/1PNb3P/PB1PNPB1/R2QK2R w KQ - 0 12 : Th2?????????? SURTOUT PAS
-> r3r1k1/pp4pn/2nb1q2/4p2p/2P1B2P/1P6/PB1PNP2/R2Q1RK1 b - - 0 17 : il regarde pas Dxh4??
-> r1b1kb1r/ppppq1pp/8/5p2/2BQnB2/8/PPP2PPP/RN2R1K1 b kq - 1 9 : Dc5 égalise
-> Remettre virtual mobility pour l'évaluation de la sécurité du roi?
-> King safety est tellement proeminent qu'il y a beaucoup de coups qu'il ne regarde même pas, car il voit une menace en 1 au coup d'après (qu'il peut parer...)
-> En position perdante, il va chercher les draw (même si c'est pas déjà 3 répèt.. du coup il joue le coup qui répète, même si c'est pas le meilleur coup)
-> Trop de quiescence, pas assez de killer moves? il regarde que les captures...
-> Pour le pick_random_child: faire en fonction de l'évaluation relative!! (cela peut changer beaucoup de choses...)
-> GUI: toujours montrer le "meilleur" coup, même s'il dépasse pas l'arrow rate
-> GUI: afficher le coup avec la meilleure éval différement sur les flèches
-> En fait les autres coups qui ne font pas mat ne sont pas fully explored, d'où le souci...
-> Faire du debug, code clean et optimisations
-> Debugger la quiescence
-> get_safe_check_value() : hypeeeer lent!!!
-> Vérifier l'algo... à chaque fois y'a des coups qu'il regarde pas, sauf quand on clique dessus, il voit que c'est le meilleur coup...
-> Elargir la zone d'attaque défense du roi? pion en e5 participe à l'attaque.. le fou c1 aussi...
-> 5r2/2p3pk/pp1b2rp/3Rpq2/2P2P2/1P2B1P1/6QP/3R2K1 b - - 0 27 : beaucoup de choses à revoir dans king safety.. il faut mieux combiner les paramètres... ici les noirs sont gagnants
-> Dans quiescence à depth 0, il est pas censé passer plusieurs fois dedans pour un même noeud.. si?
-> En fait si, mais on peut avoir des quiescence à depth -1... ça pose problème?
-> 5k2/R4p2/2B3p1/6Pp/7P/P3P1K1/1PPr4/3r4 w - - 1 27 : plutôt égal
-> Il donne des pions beaucoup trop facilement...
-> r1bq1b1r/ppp2kpp/5n2/n7/3Bp3/8/PPPNNPPP/R2Q1RK1 b - - 2 9 : -_- le roi noir n'a pas de soucis là...
-> r2q4/p1p2k1p/3b4/1p3p2/2P3b1/2Q2N2/P1P1r1PP/3R1R1K w - - 0 19 : c5??????????????????????
-> Refaire un nouveau pick random move plus simple?
-> parfois ça re-explore un coup non fully explored avant de regarder les non-explorés...
-> Transpositions!! on a des overflows etc.. des trucs louches se produisent
-> A REGLER: *** Si y'a un problème de nombre de noeuds, c'est que lorsqu'on calcule dans une variante transposée, un seul des parents est mis à jour ***
-> Faut-il garder le beta cut-off si on est en échec??? alpha aussi??
-> Voir s'il faut moduler la profondeur de la quiescence en fonction de l'importance de la branche
-> q_depth plus petit avec des cas d'extensions?
-> revoir les autorisations de standpat?
-> positions_history à mettre dans exploration plutôt que board
-> Faut-il qu'il joue les "seuls coups" plus rapidement, ou c'est déjà le rôle du pseudo-random explorer?
-> Re élargir l'exploration des coups?
-> r4rk1/2p2ppp/p1nqp3/1p6/3P2b1/P3PN2/1P1QBPPP/2R2RK1 w - - 0 15 : Txc6!!
-> rnbq1rk1/ppp2ppp/8/3P4/2BNp1n1/3P4/PPP1QPPb/RNB2R1K b - - 1 11 : faut jouer Dh4!!
-> rk4r1/ppp2p1p/2b1n3/7R/7N/P1P3PB/2P5/2K2R2 w - - 2 27 : faut jouer Txf7!!
-> 2kr3r/B1p1b1pp/2p3qn/4p3/4N3/P2P2Nb/1PP2PKP/R3QR2 w - - 1 18 : faut prendre le fou...
-> rnb2rk1/pp3ppp/3q1n2/2b5/8/P7/1PBNNPPP/R1BQK2R w KQ - 1 13 : roque??
-> 6k1/3Q3p/2p2pp1/1p2P1q1/1n4B1/7P/PP3KP1/2n5 w - - 0 35 : De8+ ça mate!
-> 6k1/6rp/1p2p2q/5p2/2PPb2N/4b2P/P4QP1/2B2R1K b - - 9 44 : roi blanc dans la merde
-> r3kb1r/pppq1ppp/2n1p1b1/1B1p2Pn/3P4/2N1PP2/PPP1N2P/R1BQ1RK1 b kq - 2 10 : castling distance qui disparait quand on roque, ça décourage un peu de roquer...
-> 2kr1b1r/ppp2ppp/2q1p1b1/3p2Pn/P2P4/2N1PP2/1PP1N2P/R1BQ1RK1 b - - 0 12 : Ff5 qui augmente de +1.5 la new_piece_mobility pour les noirs.. pourquoi?
r3r1k1/p4ppp/1pb5/n1p5/3Pp3/2P4P/q1PNRPP1/1RBQ2K1 b - - 3 19 : bien perdant pour les blancs: très mauvaise coordination des pièces... TODO *** accentuer cela dans la piece activity? avec le nombre de coups effectivement possibles?

EVAL: 
-> Améliorer les pièces d'attaque et de défense... plus gros bonus quand une pièce attaque un endroit non (ou peu) défendu. plus gros bonus quand on défend une case attaquée
-> Il donne vraiment trop souvent des pions dans l'ouverture
-> Pour évaluer les finales etc.., il faut un winnable white, et un winnable black... Tour Cavalier vs Tour = nulle
-> Pions arriérés
-> Re-évaluer les pièces en fonction du type de position (colonnes / diagonales ouvertes / fermées, pions passés...)
-> Implémenter les faiblesses de la position? pour taper dessus, et éviter de s'en créer?
-> Lignes et colonnes ouvertes sur le roi, c'est grave seulement si des tours/fous/dames peuvent aller dessus
-> Potentiel d'attaque global qui modifie moins la king safety? même avec 2 pièces, ça peut mater contre beaucoup
-> Trop de bonus cumulés pour les fous: fianchetto, piece mobility, piece activity, bishop activity, bishop pair...
-> Pour king safety, quand ça dépasse pas 0, rien ne change.. alors il n'y a jamais de plan d'attaque...
-> Catégorie: Développement (~= distance au roque?), plutôt que de compter ça dans King
-> https://hxim.github.io/Stockfish-Evaluation-Guide/ : shelter strength à implémenter... rnbqkbnr/ppp1pppp/8/3p4/6P1/8/PPPPPP1P/RNBQKBNR w KQkq - 0 2 : ici le roi blanc est le plus faible. castling distance donne aussi un bonus, alors que le roque côté roi est pourri...
-> Pour les clouages, rajouter des bonus quand on les appuie avec d'autres attaques
-> Refaire l'activité des pièces
-> Etudier les bons fous et les mauvais fous
-> Rajouter les faiblesses sur une couleur
-> Faut-il garder le safe_squares = 1 pour les pions dans trapped_pieces?
-> Puissance des pions passés: dépend des pièces restantes. Une pièce mineure se sacrifie plus facilement dessus qu'une dame
-> Pawn protection pour quand le roi n'est pas roqué (en prenant en compte les poussées de pions f, g et h par exemple)
-> Ajouter un 'exposed queen' pour éviter les scandi?
-> Les cases faibles proches du roi sont plus graves
-> Théorème des fous de Kev: un fou qui protège le roi et attaque le roi adverse est plus fort qu'une tour
-> Remettre de la solidité: pénaliser les pièces non-protégées
-> Tests: vérifier que l'évaluation est équilibrée (noir/blanc) si on retourne une position

1k1r1b1r/ppp2pp1/2n2n2/1N2p2p/P1b5/3PBN1P/q3BPP1/1R1Q1RK1 w - - 0 15 : légèrement mieux aux blancs: dame noire bien isolée
r4Nk1/pp3ppp/8/1q1p4/2p5/2n1B3/2P1QPPP/2KRRB2 w - - 0 9 : 780 attaque pour les blancs??
r1b5/3k4/pq2p1N1/1pbpPp1Q/8/4B3/PP3K1P/R6R w - - 5 23 : roi blancs plus safe
r1b1kb2/3n4/pqn1p1p1/1p1pPr2/3P1N2/3BBN2/PP3K1P/R2Q3R b q - 3 17 : blancs gagnants
r1b1kb1r/3n1p1p/p1n5/qp1pPp2/3P4/5N2/PP2NK1P/R1BQ1B1R w kq - 0 14 : roi blanc safe... 2kr1b1r/ppp2ppp/8/3Pn2q/3Np1b1/2P1B3/PP2BP1P/R2Q1RK1 w - - 2 14 : pas là !!!
8/5B2/3k1p2/4p3/3p3P/2b3P1/4PP2/6K1 b - - 0 45 : nulle ! (fous de couleur opposée)
7q/4kp2/5p2/4p3/2Bp3P/2b2QP1/4PP2/6K1 b - - 9 37 : Rf8 seul coup qui tient!
7q/5pk1/5p2/4p2Q/3pB2P/6P1/4PP2/b5K1 w - - 2 34 : quasi nulle
8/6p1/6k1/p2R4/b2B2K1/8/8/3r4 b - - 1 63 : ?????????????? king safety??
rnb2rk1/pppp3p/5Q2/3N4/8/4p3/PPP3PP/6K1 w - - 1 19 : ici c'est bien mat en 1
r4rk1/pp2bppp/4N3/q2p4/2p1n3/P1P1B3/1PP1QPPP/2KRRB2 b - - 0 5 : Fxa3!! gagne
r7/3n1k1p/2p1b1p1/pp6/n3PB2/3R1P2/6PP/5R1K b - - 1 30 : test king safety
2r4k/3Q1R2/6q1/8/4b3/6Pn/P4P1K/8 b - - 4 45 : ...
5k2/8/8/8/4b3/6PK/P4P2/8 b - - 0 49 : mieux pour les blancs
4rk2/1p3ppQ/1qn1p3/p1p3P1/4B3/P3BP2/1b3PK1/3R4 b - - 0 16 : gagnant pour les blancs
7r/2p2k2/p4b2/P1pPpPp1/2P1P1Rq/5B2/2Q4P/7K b - - 2 44 : c'est le roi blanc le moins bon ici. le roi noir est safe. des pions tous seuls ne suffisent pas à attaquer...
r2q1rk1/pppn1bpp/5p2/8/3PpN2/2P1B1Q1/P1P3PP/R4RK1 w - - 2 16 : pawn push threat... ne fait pas toujours de sens.. à supprimer?
3r1rk1/pp4pp/5p2/3n3R/4p3/2P3Q1/2q3PP/2B1R2K w - - 0 26 : Fh6 seule tentative pour sauver
r3k2r/pppb3p/4p1p1/n5Q1/4p3/2q3PP/P1P1B1P1/3R1R1K w kq - 0 20 : Tf7!! ça mate
r3r1k1/ppq2ppp/3b1n2/6n1/2P1p1P1/1PN4P/PBQPRPB1/R5K1 w - - 5 18 : il a peur pour le roi donc fait Rf1...
rnb1kb1r/pp3ppp/5n2/4q3/8/3B4/PP3PPP/RNBQK1NR w KQkq - 0 9 : pas Rf1 stp... :'(
5rk1/1p3Np1/p1n1Bn2/q4P1p/2Q4P/4R3/1P4P1/6K1 w - - 0 30 : le roi n'est en fait pas tant en danger que ça...
r1b2rk1/pp2bpp1/5n1p/8/8/1PNpN3/1P1P1PPP/R1B2RK1 b - - 1 17 : fou de cases noires des blancs: enfermé quasi à vie
2kr1b1r/ppp1qppp/5n2/8/3n4/1PN5/P1PPBPPP/R1BQ1RK1 b - - 4 11 : noirs mieux.. le cheval est mieux que le fou en e2
r4rk1/ppq2ppp/3b1n2/3p4/8/3P3P/PPP1QPP1/RNB2RK1 b - - 0 13 : y'a R là... les blancs sont mieux
r3k2r/ppp3pp/2n2n2/4pp2/8/3PBN2/bPP2PPP/2KR1B1R w kq - 0 12 : b3 enferme le fou
2r3k1/6p1/8/5p1p/4nP2/R1BRPK2/2P4P/7r b - - 5 40 : si on met overload, il trouve Txh2 beaucoup plus facilement et voit le mat... mais est-ce que ça ne fait pas doublon?
r1b1r2k/pp3pp1/2n4n/3qp3/2Np4/3B1N1P/PP3PP1/RQ2R1K1 w - - 0 17 : la dame ne participe qu'à moitié à l'attaque, car le fou blanc est devant... -> COMPTER CA COMME UNE SEMI ATTAQUE?
b7/P7/1B1k2p1/5p1p/4p2P/2b3P1/5P2/5BK1 w - - 2 41 : blancs gagnants!!
b7/P3k3/6p1/5pPp/2B1p3/6P1/5P2/6K1 b - - 0 44 : pareil!!
r1bq1r1k/1pp3p1/1n2pb1p/8/pP1P3P/P2B1NR1/2QB1PP1/R3K3 w Q - 2 19 : +2 à cause d'un overload sur h7, alors que ça menace rien...
r1bq1rk1/1ppnbppp/4p3/4P3/pPBP3P/P4N2/2QB1PP1/R3K2R b KQ - 0 14 : ici, il faut regarder le nombre de pièces en attaque pour les blancs: elles participent presque toutes! (même le pion e5)
r1bq1rk1/1pp1bpp1/1n2p2p/4P3/pP1P3P/P2B1N2/2QB1PP1/R3K2R w KQ - 0 16 : Th3 très fort, pour ramener une autre pièce dans l'attaque
r2q1r1k/1ppbbpp1/1n2p2p/4P3/pP1P3P/P2B1NR1/2QB1PP1/R3K3 w Q - 4 18 : Fxh6!! gagne déjà
r1bq1rk1/1pp3p1/1n3b1B/4p3/pP1P2R1/P2B1N2/2Q2PP1/R3K3 w Q - 0 21 : Txg7!! gagne (il faut un peu de calcul quand-même)
2rqkb1r/pp3p2/2n1p3/3pPnpp/3P4/3QB1PP/PP1N1P1N/R4RK1 b k - 0 14 : pas Th7 stp...
3rkbnr/pQ2pppp/4q3/2p5/3n4/6PP/PPPP1PB1/RNB2K1R w k - 1 10 : ici c'est les blancs qui sont gagnants...
r2q4/pp4kp/2p1Qrp1/3pB3/3P4/8/PPP3PP/R5K1 w - - 0 20 : met 4 ans à voir que Tf1 gagne alors que c'est évident... la quiescence prend trop de temps alors il regarde pas tous les coups et reste sur le standpat
r7/pp5k/2p2B2/3p2Qp/3P4/8/PPP3PP/6K1 w - - 1 25 : pareil
r1br2k1/pp3pp1/7p/5p2/3P4/1P1Q3P/5PP1/R5K1 b - - 1 31 : noirs un peu mieux
rnbqkb1r/ppp1pp1p/6p1/3pP3/3Pn3/2N5/PPPB1PPP/R2QKBNR b KQkq - 2 5 : mieux vaut prendre le fou que le cavalier!
r5k1/pp1nqrpp/2p5/8/2Bb1Nb1/6P1/P2BN2P/R2QKR2 w - - 5 19 : les blancs sont complètement gagnants
r2q1rk1/p1p2p1p/8/1b1pp1B1/3p2Q1/2P5/P1P3PP/R4RK1 b - - 0 20 : pareil
r4rk1/p1q3bp/2ppbp2/2p1n2p/4PB1Q/3PN3/PPP1N1P1/R4RK1 b - - 1 18 : roi noir très faible. plus que le roi blanc... (blancs gagnants)
rnb4r/ppp1BQbk/3p3p/4P3/2BP4/2N5/PPP2K1P/7q w - - 3 18 : roi noir beaucoup plus en danger (#3)
rnb2b1r/p4kpp/8/3RP3/2p5/5N2/PP3PPP/R1B3K1 w - - 0 15 : roi safe!!
rnb1k2r/ppppq1pp/1b6/3BPp2/P7/2P2N2/2P1K1PP/R1BQ3R b kq - 0 10 : le roi est quasi tranquille
r1b1kq1r/pp1p2p1/n1p4p/P3Pp2/2B4N/2P1K3/2P3PP/R2Q3R b kq - 2 16 : y'a R
5rk1/p4qb1/1p1p3p/3Ppp2/PRP1P3/2N1BnPb/2Q4P/1R5K w - - 0 5 : c'est le roi blanc qui sue...
3rr1k1/pp3p2/2ppqp1p/4pN2/4P1PQ/1P1PP2P/1PP5/5RK1 b - - 13 22 : foutu pour le roi noir
N6N/pp2k1pp/8/3Pp3/2Bn4/6qP/PPPP4/R1B4K b - - 0 20 : Cf3 #3
3q4/8/4r3/4np1p/5Pk1/4P3/6KP/4B3 w - - 1 3 : #1 pour les blancs
r1b2rk1/pnB1qp1p/2Q3p1/1B1pp3/8/2P1PP2/P1P3PP/1R3RK1 w - - 0 18 : blancs gagnants
r1bqkbnr/ppp2ppp/2np4/4p3/4P3/3P1N2/PPP1BPPP/RNBQK2R b KQkq - 1 4 : f5 fort! il faut attaquer la chaîne de pions, et prendre le centre
2nr2k1/1p1rppbp/n3b1p1/1N6/2P5/BPN2B2/P4PPP/2R2RK1 b - - 10 18 : blancs gagnants
1k1r1br1/ppp2ppp/2nq4/4p3/2P3n1/2NPBN2/P1P2PPP/1R1QR1K1 w - - 6 13 : faut garder le fou e3 (Fd2 le meilleur coup)
r1bqk2r/ppp4p/1bnppp2/6B1/3P4/2P2N2/PP4PP/RN1Q1BKR w kq - 0 11 : attention avec Ff4, ça donne du e5 aux noirs, et le roi en g1 sue
1bkr3r/1ppb2q1/2nppp2/pN5p/P2P3N/2P1B3/1P4PP/R2Q1BKR w - - 6 19 : il faut envoyer du b4 pour attaquer le roi noir
r5k1/ppqnn2p/2pRb1p1/2P5/4P2r/1PQ1B3/P4PBP/5RK1 w - - 3 20 : gagnant stratégiquement
Nnb2b1r/1p1k1p1p/p4p2/8/3p4/8/PP2PPPP/R3KB1R b KQ - 0 12 : Fc5 gagne (le cavalier est enfermé)
2kr1b1r/pppqpppp/2n5/3n1b2/3P4/2PB1N2/PP3PPP/RNBQ1RK1 w - - 5 8 : il faut envoyer les pions sur le roi noir, c'est du roque opposés (augmenter la valeur des pawn storm en roques opposés?)
8/8/8/5Q1K/8/2pp4/2k5/8 w - - 0 5 : là le roi doit forcément aller vers les pions et le roi adverse pour attaquer
2b1k2r/5ppp/1qp5/p2n4/4pP2/P7/R3B1PP/1rB1QKNR w k - 2 17 : déjà foutu pour les blancs
r1bq1rk1/1p3ppp/p1np4/3Np1b1/4P3/1N2P3/PPPQB1PP/R4RK1 w - - 7 13 : noirs un peu mieux (pion e3 très faible, et tapé dessus; +clouage avec la dame)
rnq1k2r/pp2bp2/2p5/3p4/5Pb1/P2P1NPp/1PP4K/R1BQ1R1N b kq - 0 17 : ici le pion h3 fait office de bouclier. le roi est en fait safe
2rqr2k/p2p1p1B/bbn4Q/1p2P1p1/1P4P1/P3PN2/2P2PP1/RNB2RK1 w - - 3 17 : devrait voir le mat avec Fg6 en 3...
3r1rk1/2qnpp1p/1p4p1/2p1b3/4P3/1QP1B2P/1P2BPP1/R4RK1 b - - 1 6 : ici le roi est effectivement mieux en g1 que h1 (donc Fh2+ puis Ff4 plus fort que Ff4 direct)
r1bqk2r/1p1n1pb1/p1pBp1pp/2Pp3n/PP1P4/3BPN2/3N1PPP/R2QK2R b KQkq - 0 1 : améliorer la notion de bon fou? en fonction des pions adverses? ici tous les pions adverses sont sur case blanche.. le fou de cases noires des blancs est-il donc un bon fou?
r1r5/2p1bk1p/p1Pp2pP/P4pP1/1R1PpP2/4P3/4NK2/1R6 w - - 0 1 : d5 hyper fort stratégiquement! le fou des noirs ne peut plus jouer
rnb2b1r/ppp1B2k/3p3p/4P2Q/2BP4/2N5/PPP2K1P/7q w - - 1 17 : le roi noir est mat
r1b2kn1/1p1p1p1r/1p1P3p/1N1N1R2/6p1/8/PP4PP/5RK1 b - - 3 21 : fou blanc enfermé à vie
2Rnk3/3p2p1/3Pp2r/1b2P1Np/7P/5P1K/6P1/8 b - - 1 43 : les noirs sont paralysés -> gagnant pour les blancs (même Lc0 met du temps à comprendre)
3nk3/1bRp2p1/3Pp2r/1q2P1Np/1P3Q1P/5P1K/6P1/8 w - - 3 40 : Dc4 gagne ici (grâce à ce qui a été dit plus haut)
2kr1b2/pp2pp2/8/8/3p3B/3P4/PPP1KPr1/R6R w - - 0 21 : Fg3 enferme la tour
r1bq1rk1/2n2nbp/3p2p1/p1pPpP2/P1P5/2NN4/3BBPPP/1R1Q1RK1 b - - 0 19 : ici gxf5 est intéressant: pions connectés au centre. ça ouvre une colonne sur le roi adverse. sur Fxf5, la case e4 est faible (il faut améliorer la définition des cases faibles... quand un pion est bloqué et ne peut pas controller la case)
2kr3r/B1p1b1pp/2p3qn/4p3/4N3/P2P2NK/1PP2P1P/R3QR2 b - - 0 18 : le roi blanc n'a pas de problème
r4rk1/1p3ppp/3b4/p1pq4/4b1Q1/2P2N2/PP3PPP/R1B2RK1 b - - 1 18 : g6 erreur car ça donne les cases noires autour du roi après Fh6
1k6/5ppp/1p6/8/4BP2/4p1Pb/1q5r/2R1Q1K1 b - - 3 34 : roi blanc mat
r7/ppp2pp1/3p1nk1/1P1Pp3/1PP1Pn2/R4Pqr/1B1Q3N/6RK b - - 1 29 : quasi gagnant pour les noirs (roi faible)
3rrbk1/p1q2pp1/1n4p1/1R1p4/3B2P1/2PQ1N1P/P4PK1/5R2 w - - 9 23 : le roi blanc n'est pas si pourri
2q2bk1/p2r1pp1/Rn2r1p1/R2p4/3B2P1/2PQ1N1P/P4PK1/8 b - - 18 27 : ici les blancs sont quasi gagnants. -175 pour les trapped piece, à revoir car la tour n'est pas vraiment en danger ni isolée
r4rk1/ppq1bpp1/4bn2/6Bp/Q2pP2P/3P2P1/PP2NPB1/1K1R3R b - - 3 16 : b5 seul coup
6Q1/8/5K2/8/1k6/8/4B3/2q5 w - - 0 11 : nulle théorique
r2q1rk1/ppp2ppp/2nbbn2/8/3P4/2PB1N2/PP3PPP/RNBQ1RK1 b - - 0 8 : trapped pieces qui favorise les noirs.. pourquoi?
5rk1/p3q1pp/2p1p3/2Pppr2/7b/2P1QP2/PP1N3N/2K3RR w - - 2 7 : gagnant pour les blancs (colonnes ouvertes sur le roi, occupées par des tours)
r5k1/1br1nppp/4p1n1/1PqpP3/p2N1P2/2P3Q1/R3B1PP/1N1R3K w - - 0 1 : ici le fou est mieux en d3 que f3... fianchetto ne fait pas de sens??
2br3k/2q4p/1pn1p1r1/p2pPpNQ/P1pP4/2P5/1PB2PP1/R3R1K1 w - - 1 30 : blancs gagnants
2br1rk1/1pq4p/p1nbp1p1/3pNp2/P1pP1P2/2P2NQP/1PB2PP1/R3R1K1 b - - 3 23 : blancs mieux (case faible en e5, pion arriéré en e6).. trapped pieces -70??
2n3k1/1p1r1ppp/p4bb1/N3p3/PPB1p1P1/B3P2P/5P2/5RK1 w - - 1 26 : Cxb7!! gagne (pions passés connectés hyper forts)
8/1p1Q2qk/4P2p/5p2/p4pP1/8/P5K1/8 w - - 0 28 : blancs gagnants
3rkb2/1pp1pp2/p1b5/4P1p1/2q3Pr/2N1PP1p/PB5P/2R1QRK1 w - - 0 19 : le roi blanc est le plus faible
r2q2k1/1p3p1p/p1p3p1/2n1Pp1P/2P5/3BR3/PP1Q1PP1/6K1 b - - 2 25 : gagnant pour les noirs!
rbr5/1q3p2/pPp1pBpk/P1QpP2p/1R5P/6P1/5P2/2R3K1 b - - 5 18 : les noirs n'ont plus de coups!
8/pp3k2/3b3p/5p2/P3n2P/1P1RPN2/1rrBKP2/6R1 b - - 0 25 : gagnant pour les noirs (beaucoup d'activité + roi blanc faible)
r1b2rk1/ppq2p1p/2np2pb/4p3/4P3/2PBPN2/PP1N2PP/R2Q1R1K w - - 3 3 : faiblesse en e3 (et e4)
r4rk1/5ppp/5b2/P4p2/8/8/P2B1PPP/3RR1K1 w - - 2 22 : a3 pour Fb4 gagne.. structure solide (sinon y'a des faiblesses)
r2q1rk1/pp1nbppp/2p2n2/3p3b/8/1P1B1N1P/PBPP1PP1/RN1QR1K1 w - - 3 11 : le fou en d3 est pas si mal, mais il bloque le pion d
r2qkb1r/ppp2ppp/2n1pn2/1B1p3b/3P4/4PN1P/PPP2PP1/RNBQ1RK1 w kq - 1 7 : g4 est pas mal affaiblisant pour le roi blanc
r3kb1r/pp2pp2/2q3p1/3pPb1p/3P1P2/N7/PP3QPP/R1B1N1K1 b kq - 0 15 : ici il faut pas mettre le fou en g7, il va taper sur du dur...
r4r2/1p1b1k2/p2p4/2pP1pPq/5P2/2Q5/PBP4P/1R4K1 w - - 0 26 : Df6+ mate
rnb1k2r/pppp2pp/5q2/2b5/2B5/2P2N2/P1P1K1PP/R1BQ3R w kq - 1 10 : Fg5 gagne
3k4/ppp2pp1/2p5/2P5/4P3/2PK2P1/PP6/RNB3q1 w - - 0 23 : égal
3r1rk1/1p1qb1p1/p1n1p2p/2p1p3/P3P1P1/2P5/1P1B1PP1/R2QRNK1 b - - 1 20 : ici blancs légèrement mieux
r1b2r2/p4p1k/1q1p1Bp1/2p3P1/2P1PP2/2N5/PP2BKP1/R7 b - - 4 20 : mat imparrable
r1bq1rk1/ppp5/3p3p/3P3R/2PB2p1/2NB4/PP3PP1/2KR4 b - - 3 18 : blancs gagnants
r1bq4/ppp5/3p2r1/3P3R/2PBNkp1/3B4/PP1K1PP1/8 b - - 5 22 : roi noir foutu

-> FAUT METTRE DES POINTEURS PARTOUT AU LIEU DE COPIER LES OBJETTTTTTSSS !! (exploration.h, gui?)

-> Retirer pawn_shield/pawn_storm des éval (déjà fait dans king_safety)
-> Regarder les TODO/FIXME dans exploration.cpp
-> Alpha-beta pruning pour la quiescence search à fix...
-> Regarder les fins de variantes pour voir si ça fonctionne

-> TESTING: Faire une fonction pour tester les IAs: problèmes tactiques, stratégiques, finales, ouvertures... avec différents temps de réflexion (1s, 3s, 10s par exemple)
-> Fonction de test d'évaluation: comparer les évals de Grogros avec celles de Leela par exemple puis fine-tuner. Résultat final: correlation entre les évals de Grogros et les évals de Leela
-> Utiliser ça pour entraîner les réseaux de neurones (au lieu de jouer contre d'autres réseaux? combiner les deux?)

-> Simplifier le softmax: delta entre le meilleur coup et l'actuel, et voir en fonction du pourcentage de réflexion déjà fait

---------
-> Pour le softmax, faut-il un gradient absolu ou relatif? pour le moment il y a la même différence entre -100 et +100 qu'entre +1800 et +2000? pas optimal...
-> Peut-on fusionner _tested_moves et _current_moves?
-> Il faut reset la table de transposition après chaque coup? sinon y'aura des positions obselettes (et potentiellement avec des indices buffer faux)
-> Réduire le temps de l'évaluation de Grogros (voir king_safety, et implémenter l'évaluation incrémentale)
-> Utiliser une mini clé de Zobrist pour les répétitions (car il y a peu de chances de collisions?) -> clé de 16 bits?
-> Table de transposition
-> Promotion de variantes: il faut repasser sur la variante principale au moment de la promotion
-> Promotions de variantes -> il faut promouvoir toute la branche depuis le début, pas juste le dernier coup (+ le FIXME -> il faut sélectionner le bon noeud après la promotion)
-> Pawn storm / Pawn shield (rajout des colonnes/diagonales ouvertes etc...) / Pions arriérés / Fix king safety / Pieces alignement (à finir)
-> Quiescence nodes qui augmente aussi avec les threads
-> Temps affiché = vrai temps
-> Delta pruning (quiessence search)
-> Revoir le k_add, on dirait que ça fait pas grand chose


----- Réseaux de neurones -----

-> Faut t-il de la symétrie dans le réseau de neurone? (car sinon il évalue pas de la même manière les blancs et les noirs)
-> Comment le faire apprendre?
-> Parties contre lui-même
-> Algorithme génétique: on détruit les plus faibles, et on fait des mutations sur les plus forts
-> Bonus et malus pendant les parties, lorsqu'il a mal évalué une position
-> Apprentissage à partir des fins de partie, puis on remonte
-> Reinforcement learning
-> Prendre en compte d'autres paramètres que les pièces (trait, roques...)
-> Y'a peu de valeurs négatives dans les évals, est-ce normal?